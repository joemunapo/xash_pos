import{r as M,c as h,w as k,a as t,t as r,b as v,v as L,f as C,d as o,h as x,o as l,F as c,e as w,n as u,g as i,i as N,u as _,l as j,j as P}from"./app-hHih9BgC.js";import{_ as V}from"./AdminLayout-B4rk0_5R.js";import"./NavLink-faodrpPr.js";import"./useFlashMessages-Br0efLxG.js";const z={class:"space-y-6"},B={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},F={class:"card p-6"},$={class:"flex items-center justify-between"},A={class:"text-3xl font-bold text-gray-900 dark:text-white"},H={class:"card p-6"},O={class:"flex items-center justify-between"},U={class:"text-3xl font-bold text-brand-600 dark:text-brand-400"},G={class:"card p-6"},I={class:"flex items-center justify-between"},E={class:"text-3xl font-bold text-orange-600 dark:text-orange-400"},R={class:"card p-6"},q={class:"flex items-center justify-between"},J={class:"text-3xl font-bold text-green-600 dark:text-green-400"},K={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Q={class:"card p-6"},W={class:"space-y-3"},X={class:"flex items-center justify-between"},Y={class:"text-sm font-semibold text-gray-900 dark:text-white"},Z={class:"flex items-center justify-between"},tt={class:"text-sm font-semibold text-gray-900 dark:text-white"},et={class:"flex items-center justify-between"},st={class:"text-sm font-semibold text-gray-900 dark:text-white"},rt={class:"flex items-center justify-between"},at={class:"text-sm font-semibold text-gray-900 dark:text-white"},lt={class:"lg:col-span-2 card p-6"},ot={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},dt={class:"md:col-span-2"},it={class:"relative"},nt={class:"card overflow-hidden"},xt={class:"overflow-x-auto"},gt={class:"w-full"},ct={class:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700"},ut={key:0},mt={class:"px-6 py-4"},yt={class:"font-medium text-gray-900 dark:text-white"},bt={class:"text-sm text-gray-500 dark:text-gray-400"},pt={class:"px-6 py-4"},ft={class:"px-6 py-4 text-right"},ht={class:"text-lg font-bold text-brand-600 dark:text-brand-400"},kt={class:"px-6 py-4"},vt={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},wt={key:1,class:"text-sm text-gray-500 dark:text-gray-500"},_t={class:"px-6 py-4"},jt={class:"flex items-center justify-center gap-2"},Tt={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-slate-700"},St={class:"flex items-center justify-between"},Dt={class:"text-sm text-gray-700 dark:text-gray-300"},Mt={class:"font-medium"},Lt={class:"font-medium"},Ct={class:"font-medium"},Nt={class:"flex gap-2"},Pt=["innerHTML"],$t={__name:"Loyalty",props:{customers:Object,stats:Object,tierDistribution:Object,filters:Object},setup(a){var p,f;const m=a,n=M({search:((p=m.filters)==null?void 0:p.search)||"",tier:((f=m.filters)==null?void 0:f.tier)||""});let y=null;const T=()=>{clearTimeout(y),y=setTimeout(()=>{b()},500)},b=()=>{P.get(route("admin.loyalty.index"),n,{preserveState:!0,preserveScroll:!0})},g=d=>new Intl.NumberFormat("en-US").format(d||0),S=d=>d?new Date(d).toLocaleDateString("en-US",{month:"short",year:"numeric"}):"N/A",D=d=>{const e="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium capitalize";switch(d){case"platinum":return`${e} bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400`;case"gold":return`${e} bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400`;case"silver":return`${e} bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300`;default:return`${e} bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400`}};return(d,e)=>(l(),h(V,{"page-title":"Loyalty Program"},{default:k(()=>[t("div",z,[e[26]||(e[26]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Loyalty Program"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Manage customer loyalty points and rewards")],-1)),t("div",B,[t("div",F,[t("div",$,[t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"Total Members",-1)),t("p",A,r(a.stats.total_members),1)]),e[3]||(e[3]=t("div",{class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center"},[t("i",{class:"fas fa-users text-blue-600 dark:text-blue-400 text-xl"})],-1))])]),t("div",H,[t("div",O,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"Total Points",-1)),t("p",U,r(g(a.stats.total_points)),1)]),e[5]||(e[5]=t("div",{class:"w-12 h-12 bg-brand-100 dark:bg-brand-900/30 rounded-xl flex items-center justify-center"},[t("i",{class:"fas fa-star text-brand-600 dark:text-brand-400 text-xl"})],-1))])]),t("div",G,[t("div",I,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"Points Redeemed",-1)),t("p",E,r(g(a.stats.points_redeemed)),1)]),e[7]||(e[7]=t("div",{class:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-xl flex items-center justify-center"},[t("i",{class:"fas fa-gift text-orange-600 dark:text-orange-400 text-xl"})],-1))])]),t("div",R,[t("div",q,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"Active This Month",-1)),t("p",J,r(a.stats.active_this_month),1)]),e[9]||(e[9]=t("div",{class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center"},[t("i",{class:"fas fa-chart-line text-green-600 dark:text-green-400 text-xl"})],-1))])])]),t("div",K,[t("div",Q,[e[14]||(e[14]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Tier Distribution",-1)),t("div",W,[t("div",X,[e[10]||(e[10]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"w-3 h-3 rounded-full bg-amber-700"}),t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Bronze")],-1)),t("span",Y,r(a.tierDistribution.bronze),1)]),t("div",Z,[e[11]||(e[11]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"w-3 h-3 rounded-full bg-gray-400"}),t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Silver")],-1)),t("span",tt,r(a.tierDistribution.silver),1)]),t("div",et,[e[12]||(e[12]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"w-3 h-3 rounded-full bg-yellow-500"}),t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Gold")],-1)),t("span",st,r(a.tierDistribution.gold),1)]),t("div",rt,[e[13]||(e[13]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"w-3 h-3 rounded-full bg-purple-500"}),t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Platinum")],-1)),t("span",at,r(a.tierDistribution.platinum),1)])])]),t("div",lt,[e[17]||(e[17]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Search Members",-1)),t("div",ot,[t("div",dt,[t("div",it,[e[15]||(e[15]=t("i",{class:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none"},null,-1)),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.search=s),type:"text",class:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:"Search by name, phone, or email...",onInput:T},null,544),[[L,n.search]])])]),t("div",null,[v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.tier=s),class:"input-field",onChange:b},[...e[16]||(e[16]=[t("option",{value:""},"All Tiers",-1),t("option",{value:"bronze"},"Bronze",-1),t("option",{value:"silver"},"Silver",-1),t("option",{value:"gold"},"Gold",-1),t("option",{value:"platinum"},"Platinum",-1)])],544),[[C,n.tier]])])])])]),t("div",nt,[t("div",xt,[t("table",gt,[e[21]||(e[21]=t("thead",{class:"bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Customer"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Tier"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Points"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"Contact"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Actions")])],-1)),t("tbody",ct,[a.customers.data.length===0?(l(),o("tr",ut,[...e[18]||(e[18]=[t("td",{colspan:"5",class:"px-6 py-12 text-center"},[t("i",{class:"fas fa-star text-6xl text-gray-300 dark:text-gray-600 mb-4"}),t("p",{class:"text-lg font-medium text-gray-900 dark:text-white mb-1"},"No loyalty members yet"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Customers will appear here once they earn points")],-1)])])):x("",!0),(l(!0),o(c,null,w(a.customers.data,s=>(l(),o("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-slate-800/50"},[t("td",mt,[t("p",yt,r(s.full_name),1),t("p",bt,"Member since "+r(S(s.member_since)),1)]),t("td",pt,[t("span",{class:u(D(s.loyalty_tier))},[e[19]||(e[19]=t("i",{class:"fas fa-crown mr-1"},null,-1)),i(r(s.loyalty_tier),1)],2)]),t("td",ft,[t("span",ht,r(g(s.loyalty_points)),1)]),t("td",kt,[s.phone?(l(),o("p",vt,r(s.phone),1)):x("",!0),s.email?(l(),o("p",wt,r(s.email),1)):x("",!0)]),t("td",_t,[t("div",jt,[N(_(j),{href:d.route("admin.customers.show",s.id),class:"px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"},{default:k(()=>[...e[20]||(e[20]=[t("i",{class:"fas fa-eye mr-1"},null,-1),i("View ",-1)])]),_:1},8,["href"])])])]))),128))])])]),a.customers.data.length>0?(l(),o("div",Tt,[t("div",St,[t("p",Dt,[e[22]||(e[22]=i(" Showing ",-1)),t("span",Mt,r(a.customers.from),1),e[23]||(e[23]=i(" to ",-1)),t("span",Lt,r(a.customers.to),1),e[24]||(e[24]=i(" of ",-1)),t("span",Ct,r(a.customers.total),1),e[25]||(e[25]=i(" results ",-1))]),t("div",Nt,[(l(!0),o(c,null,w(a.customers.links,s=>(l(),o(c,{key:s.label},[s.url?(l(),h(_(j),{key:0,href:s.url,class:u(["px-3 py-1 text-sm rounded-lg border",s.active?"bg-brand-600 text-white border-brand-600":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(l(),o("span",{key:1,class:u(["px-3 py-1 text-sm rounded-lg border opacity-50 cursor-not-allowed bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,Pt))],64))),128))])])])):x("",!0)])])]),_:1}))}};export{$t as default};
