import{m as B,E as A,c as E,w as y,a as s,i as w,u as l,l as h,g as x,p as C,b as n,d as i,h as m,v as p,o as a,t as u,q as U,F as f,e as v,f as _}from"./app-C6lt1uQR.js";import{_ as F}from"./AdminLayout-CmvtP4AP.js";import"./NavLink-CZ7tcFJn.js";import"./useFlashMessages-DqH0SBLZ.js";const M={class:"max-w-2xl"},P={class:"mb-6"},S={class:"space-y-4"},L={key:0,class:"text-red-500 text-sm mt-1"},j={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},D={key:0,class:"text-red-500 text-sm mt-1"},I={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},R={key:0,class:"text-red-500 text-sm mt-1"},T={class:"flex items-center gap-3"},q={class:"space-y-4"},O=["value"],$={class:"grid grid-cols-2 gap-2 mt-2"},z=["value"],G={class:"text-sm text-gray-700 dark:text-gray-300"},H={key:0},J=["value"],K={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-slate-700"},Q=["disabled"],W={key:0,class:"fas fa-spinner fa-spin mr-2"},se={__name:"Edit",props:{user:Object,branches:Array,userBranchIds:Array,roles:Array},setup(b){var c,k;const o=b,t=B({name:o.user.name,email:o.user.email,phone_number:o.user.phone_number||"",password:"",pin:"",role:o.user.role,is_active:o.user.is_active,branches:o.userBranchIds||[],primary_branch_id:((k=(c=o.user.branches)==null?void 0:c.find(d=>{var e;return(e=d.pivot)==null?void 0:e.is_primary}))==null?void 0:k.id)||null});A(()=>t.branches,d=>{d.length>0&&!d.includes(t.primary_branch_id)&&(t.primary_branch_id=d[0])});const V=()=>{t.put(route("admin.users.update",o.user.id))};return(d,e)=>(a(),E(F,{"page-title":"Edit User"},{default:y(()=>[s("div",M,[s("div",P,[w(l(h),{href:d.route("admin.users.index"),class:"inline-flex items-center text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-4"},{default:y(()=>[...e[9]||(e[9]=[s("i",{class:"fas fa-arrow-left mr-2"},null,-1),x(" Back to Users ",-1)])]),_:1},8,["href"]),e[10]||(e[10]=s("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Edit User",-1)),e[11]||(e[11]=s("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Update user details and permissions",-1))]),s("form",{onSubmit:C(V,["prevent"]),class:"card p-6 space-y-6"},[s("div",S,[e[18]||(e[18]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Account Information",-1)),s("div",null,[e[12]||(e[12]=s("label",{class:"label"},"Full Name *",-1)),n(s("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>l(t).name=r),type:"text",class:"input-field"},null,512),[[p,l(t).name]]),l(t).errors.name?(a(),i("p",L,u(l(t).errors.name),1)):m("",!0)]),s("div",j,[s("div",null,[e[13]||(e[13]=s("label",{class:"label"},"Email *",-1)),n(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>l(t).email=r),type:"email",class:"input-field"},null,512),[[p,l(t).email]]),l(t).errors.email?(a(),i("p",D,u(l(t).errors.email),1)):m("",!0)]),s("div",null,[e[14]||(e[14]=s("label",{class:"label"},"Phone",-1)),n(s("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>l(t).phone_number=r),type:"text",class:"input-field"},null,512),[[p,l(t).phone_number]])])]),s("div",I,[s("div",null,[e[15]||(e[15]=s("label",{class:"label"},"New Password",-1)),n(s("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>l(t).password=r),type:"password",class:"input-field",placeholder:"Leave blank to keep current"},null,512),[[p,l(t).password]]),l(t).errors.password?(a(),i("p",R,u(l(t).errors.password),1)):m("",!0)]),s("div",null,[e[16]||(e[16]=s("label",{class:"label"},"New PIN",-1)),n(s("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>l(t).pin=r),type:"text",maxlength:"6",class:"input-field",placeholder:"Leave blank to keep current"},null,512),[[p,l(t).pin]])])]),s("div",T,[n(s("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=r=>l(t).is_active=r),id:"is_active",class:"w-4 h-4 text-emerald-600 rounded border-gray-300 focus:ring-emerald-500"},null,512),[[U,l(t).is_active]]),e[17]||(e[17]=s("label",{for:"is_active",class:"text-sm text-gray-700 dark:text-gray-300"},"User is active",-1))])]),s("div",q,[e[22]||(e[22]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Role & Access",-1)),s("div",null,[e[19]||(e[19]=s("label",{class:"label"},"Role *",-1)),n(s("select",{"onUpdate:modelValue":e[6]||(e[6]=r=>l(t).role=r),class:"input-field"},[(a(!0),i(f,null,v(b.roles,r=>(a(),i("option",{key:r.value,value:r.value},u(r.label),9,O))),128))],512),[[_,l(t).role]])]),s("div",null,[e[20]||(e[20]=s("label",{class:"label"},"Assign to Branches",-1)),s("div",$,[(a(!0),i(f,null,v(b.branches,r=>(a(),i("label",{key:r.id,class:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors"},[n(s("input",{type:"checkbox",value:r.id,"onUpdate:modelValue":e[7]||(e[7]=g=>l(t).branches=g),class:"w-4 h-4 text-emerald-600 rounded border-gray-300 focus:ring-emerald-500"},null,8,z),[[U,l(t).branches]]),s("span",G,u(r.name),1)]))),128))])]),l(t).branches.length>0?(a(),i("div",H,[e[21]||(e[21]=s("label",{class:"label"},"Primary Branch",-1)),n(s("select",{"onUpdate:modelValue":e[8]||(e[8]=r=>l(t).primary_branch_id=r),class:"input-field"},[(a(!0),i(f,null,v(l(t).branches,r=>{var g;return a(),i("option",{key:r,value:r},u((g=b.branches.find(N=>N.id===r))==null?void 0:g.name),9,J)}),128))],512),[[_,l(t).primary_branch_id]])])):m("",!0)]),s("div",K,[w(l(h),{href:d.route("admin.users.index"),class:"btn-secondary"},{default:y(()=>[...e[23]||(e[23]=[x("Cancel",-1)])]),_:1},8,["href"]),s("button",{type:"submit",disabled:l(t).processing,class:"btn-primary"},[l(t).processing?(a(),i("i",W)):m("",!0),e[24]||(e[24]=x(" Save Changes ",-1))],8,Q)])],32)])]),_:1}))}};export{se as default};
