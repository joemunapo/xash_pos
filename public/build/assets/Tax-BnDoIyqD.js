import{s as v,r as F,m as j,k as N,c as $,w as L,a as t,d as n,h as i,g as y,b as c,v as p,f as q,o as d,F as I,e as z,t as o,n as O,p as S,u as r,q as D,j as V}from"./app-xtd10Mqh.js";import{_ as G}from"./AdminLayout-CiSsArE9.js";import{S as Y}from"./useFlashMessages-uyAZyciG.js";import"./NavLink-DvhtSBKV.js";const H={class:"space-y-6"},J={class:"flex items-center justify-between"},K={class:"card p-6"},P={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Q={class:"md:col-span-2"},W={class:"card overflow-hidden"},X={class:"overflow-x-auto"},Z={class:"w-full"},tt={class:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700"},et={key:0},st={class:"px-6 py-4"},at={class:"font-medium text-gray-900 dark:text-white"},rt={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},lt={class:"px-6 py-4"},dt={class:"text-lg font-semibold text-brand-600 dark:text-brand-400"},ot={class:"px-6 py-4 text-sm text-gray-900 dark:text-white"},nt={class:"px-6 py-4 text-sm text-gray-900 dark:text-white"},it={class:"px-6 py-4 text-center"},ut={key:0,class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400"},ct={class:"px-6 py-4 text-center"},pt={class:"px-6 py-4 text-center"},xt={class:"flex items-center justify-center gap-2"},mt=["onClick"],ft=["onClick"],yt={class:"bg-white dark:bg-slate-900 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},gt={class:"p-6 border-b border-gray-200 dark:border-slate-700"},bt={class:"text-xl font-bold text-gray-900 dark:text-white"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_t={class:"md:col-span-2"},kt={key:0,class:"text-red-500 text-sm mt-1"},ht={key:0,class:"text-red-500 text-sm mt-1"},wt={key:0,class:"text-red-500 text-sm mt-1"},Tt={class:"md:col-span-2"},Ct={key:0,class:"text-red-500 text-sm mt-1"},St={class:"md:col-span-2"},Dt={key:0,class:"text-red-500 text-sm mt-1"},Vt={class:"md:col-span-2 space-y-3"},At={class:"flex items-center gap-2 cursor-pointer"},Bt={class:"flex items-center gap-2 cursor-pointer"},Mt={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-slate-700"},Ut=["disabled"],Nt={__name:"Tax",props:{taxes:Array,filters:Object},setup(A){var T,C;const g=A,b=v(!1),x=v(!1),m=v(null),u=F({search:((T=g.filters)==null?void 0:T.search)||"",status:((C=g.filters)==null?void 0:C.status)||""}),s=j({name:"",rate:"",start_date:"",end_date:"",is_default:!1,is_active:!0,description:""}),_=N(()=>{let l=g.taxes;return u.search&&(l=l.filter(e=>e.name.toLowerCase().includes(u.search.toLowerCase()))),u.status==="active"?l=l.filter(e=>e.is_active):u.status==="inactive"&&(l=l.filter(e=>!e.is_active)),l});let k=null;const B=()=>{clearTimeout(k),k=setTimeout(()=>{h()},500)},h=()=>{V.get(route("admin.settings.tax"),u,{preserveState:!0,preserveScroll:!0})},M=l=>{m.value=l,s.name=l.name,s.rate=l.rate,s.start_date=l.start_date||"",s.end_date=l.end_date||"",s.is_default=l.is_default,s.is_active=l.is_active,s.description=l.description||"",x.value=!0},f=()=>{b.value=!1,x.value=!1,m.value=null,s.reset(),s.clearErrors()},U=()=>{x.value&&m.value?s.put(route("admin.settings.tax.update",m.value.id),{onSuccess:()=>f()}):s.post(route("admin.settings.tax.store"),{onSuccess:()=>f()})},R=l=>{Y.fire({title:"Delete Tax Rate?",text:`Are you sure you want to delete "${l.name}"? This action cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it",cancelButtonText:"Cancel"}).then(e=>{e.isConfirmed&&V.delete(route("admin.settings.tax.destroy",l.id))})},w=l=>new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});return(l,e)=>(d(),$(G,{"page-title":"Tax Management"},{default:L(()=>[t("div",H,[t("div",J,[e[11]||(e[11]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Tax Rates"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Manage tax rates for your company")],-1)),t("button",{onClick:e[0]||(e[0]=a=>b.value=!0),class:"btn-primary"},[...e[10]||(e[10]=[t("i",{class:"fas fa-plus mr-2"},null,-1),y("Add Tax Rate ",-1)])])]),t("div",K,[t("div",P,[t("div",Q,[e[12]||(e[12]=t("label",{class:"label"},"Search",-1)),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>u.search=a),type:"text",class:"input-field",placeholder:"Search tax name...",onInput:B},null,544),[[p,u.search]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"label"},"Status",-1)),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>u.status=a),class:"input-field",onChange:h},[...e[13]||(e[13]=[t("option",{value:""},"All",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)])],544),[[q,u.status]])])])]),t("div",W,[t("div",X,[t("table",Z,[e[19]||(e[19]=t("thead",{class:"bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Name"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-28"},"Rate"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"Start Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"End Date"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-28"},"Default"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-28"},"Status"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"Actions")])],-1)),t("tbody",tt,[_.value.length===0?(d(),n("tr",et,[...e[15]||(e[15]=[t("td",{colspan:"7",class:"px-6 py-12 text-center"},[t("i",{class:"fas fa-percentage text-6xl text-gray-300 dark:text-gray-600 mb-4"}),t("p",{class:"text-lg font-medium text-gray-900 dark:text-white mb-1"},"No tax rates found"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Add a tax rate to get started")],-1)])])):i("",!0),(d(!0),n(I,null,z(_.value,a=>(d(),n("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-slate-800/50"},[t("td",st,[t("div",null,[t("p",at,o(a.name),1),a.description?(d(),n("p",rt,o(a.description),1)):i("",!0)])]),t("td",lt,[t("span",dt,o(a.rate)+"%",1)]),t("td",ot,o(a.start_date?w(a.start_date):"-"),1),t("td",nt,o(a.end_date?w(a.end_date):"-"),1),t("td",it,[a.is_default?(d(),n("span",ut,[...e[16]||(e[16]=[t("i",{class:"fas fa-star mr-1"},null,-1),y("Default ",-1)])])):i("",!0)]),t("td",ct,[t("span",{class:O(a.is_active?"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400":"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300")},o(a.is_active?"Active":"Inactive"),3)]),t("td",pt,[t("div",xt,[t("button",{onClick:E=>M(a),class:"btn-secondary text-sm py-1.5 px-3"},[...e[17]||(e[17]=[t("i",{class:"fas fa-edit mr-1.5"},null,-1),y("Edit ",-1)])],8,mt),a.is_default?i("",!0):(d(),n("button",{key:0,onClick:E=>R(a),class:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300"},[...e[18]||(e[18]=[t("i",{class:"fas fa-trash"},null,-1)])],8,ft))])])]))),128))])])])])]),b.value||x.value?(d(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:S(f,["self"])},[t("div",yt,[t("div",gt,[t("h2",bt,o(x.value?"Edit Tax Rate":"Add Tax Rate"),1)]),t("form",{onSubmit:S(U,["prevent"]),class:"p-6 space-y-6"},[t("div",vt,[t("div",_t,[e[20]||(e[20]=t("label",{class:"label"},"Tax Name *",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>r(s).name=a),type:"text",class:"input-field",placeholder:"e.g., VAT",required:""},null,512),[[p,r(s).name]]),r(s).errors.name?(d(),n("p",kt,o(r(s).errors.name),1)):i("",!0)]),t("div",null,[e[21]||(e[21]=t("label",{class:"label"},"Tax Rate (%) *",-1)),c(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r(s).rate=a),type:"number",step:"0.01",min:"0",max:"100",class:"input-field",placeholder:"e.g., 14.5",required:""},null,512),[[p,r(s).rate]]),r(s).errors.rate?(d(),n("p",ht,o(r(s).errors.rate),1)):i("",!0)]),t("div",null,[e[22]||(e[22]=t("label",{class:"label"},"Start Date",-1)),c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r(s).start_date=a),type:"date",class:"input-field"},null,512),[[p,r(s).start_date]]),r(s).errors.start_date?(d(),n("p",wt,o(r(s).errors.start_date),1)):i("",!0)]),t("div",Tt,[e[23]||(e[23]=t("label",{class:"label"},"End Date",-1)),c(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>r(s).end_date=a),type:"date",class:"input-field"},null,512),[[p,r(s).end_date]]),r(s).errors.end_date?(d(),n("p",Ct,o(r(s).errors.end_date),1)):i("",!0)]),t("div",St,[e[24]||(e[24]=t("label",{class:"label"},"Description",-1)),c(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=a=>r(s).description=a),class:"input-field",rows:"2",placeholder:"Optional description"},null,512),[[p,r(s).description]]),r(s).errors.description?(d(),n("p",Dt,o(r(s).errors.description),1)):i("",!0)]),t("div",Vt,[t("label",At,[c(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>r(s).is_default=a),type:"checkbox",class:"w-4 h-4 text-brand-600 border-gray-300 rounded focus:ring-brand-500"},null,512),[[D,r(s).is_default]]),e[25]||(e[25]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Set as default tax rate",-1))]),t("label",Bt,[c(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>r(s).is_active=a),type:"checkbox",class:"w-4 h-4 text-brand-600 border-gray-300 rounded focus:ring-brand-500"},null,512),[[D,r(s).is_active]]),e[26]||(e[26]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Active",-1))])])]),t("div",Mt,[t("button",{type:"button",onClick:f,class:"btn-secondary"},"Cancel"),t("button",{type:"submit",class:"btn-primary",disabled:r(s).processing},[e[27]||(e[27]=t("i",{class:"fas fa-save mr-2"},null,-1)),y(o(r(s).processing?"Saving...":"Save Tax Rate"),1)],8,Ut)])],32)])])):i("",!0)]),_:1}))}};export{Nt as default};
