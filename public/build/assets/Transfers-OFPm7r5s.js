import{s as C,r as M,c as V,w as L,a as t,d as r,h as y,g as d,b as u,o as a,F as x,e as b,t as l,f as c,u as A,l as P,n as N,p as H,v as U,j as q}from"./app-DHqUTiQs.js";import{_ as $}from"./AdminLayout-BtulkRvh.js";import"./NavLink-De0s0I7C.js";import"./useFlashMessages-BBgF2e5c.js";const E={class:"space-y-6"},O={class:"flex items-center justify-between"},z={class:"card p-6"},Q={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},K=["value"],G={class:"card overflow-hidden"},I={class:"overflow-x-auto"},J={class:"w-full"},R={class:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700"},W={key:0},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Y={class:"px-6 py-4"},Z={class:"font-medium text-gray-900 dark:text-white"},tt={class:"text-sm text-gray-500 dark:text-gray-400"},et={class:"px-6 py-4"},st={class:"px-2.5 py-1 text-xs font-medium bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 rounded"},at={class:"px-6 py-4"},rt={class:"px-2.5 py-1 text-xs font-medium bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400 rounded"},lt={class:"px-6 py-4 text-right"},nt={class:"text-lg font-semibold text-gray-900 dark:text-white"},ot={class:"px-6 py-4"},dt={class:"text-sm text-gray-900 dark:text-white"},it={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},ut={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-slate-700"},xt={class:"flex items-center justify-between"},pt={class:"text-sm text-gray-700 dark:text-gray-300"},mt={class:"font-medium"},bt={class:"font-medium"},ft={class:"font-medium"},yt={class:"flex gap-2"},ct=["innerHTML"],gt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},vt={class:"relative bg-white dark:bg-slate-900 rounded-xl p-6 max-w-md w-full shadow-2xl"},kt=["value"],ht=["value"],wt=["value","disabled"],_t={key:0,class:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},St={class:"text-sm text-red-600 dark:text-red-400"},Tt={class:"flex gap-3 pt-2"},Nt={__name:"Transfers",props:{transfers:Object,branches:Array,products:Array,filters:Object},setup(o){var k,h;const v=o,f=C(!1),p=C(""),i=M({branch_id:((k=v.filters)==null?void 0:k.branch_id)||"",status:((h=v.filters)==null?void 0:h.status)||""}),n=M({product_id:"",from_branch_id:"",to_branch_id:"",quantity:"",notes:""}),g=()=>{q.get(route("admin.inventory.transfers"),i,{preserveState:!0,preserveScroll:!0})},F=()=>{i.branch_id="",i.status="",g()},j=()=>{if(p.value="",n.from_branch_id===n.to_branch_id){p.value="Source and destination branches must be different";return}q.post(route("admin.inventory.transfers.store"),n,{onSuccess:()=>{f.value=!1,Object.keys(n).forEach(m=>n[m]=""),p.value=""},onError:m=>{p.value=m.message||"Transfer failed. Please check the form."}})},D=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(m,e)=>(a(),V($,{"page-title":"Stock Transfers"},{default:L(()=>[t("div",E,[t("div",O,[e[11]||(e[11]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Stock Transfers"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Move inventory between branches")],-1)),t("button",{onClick:e[0]||(e[0]=s=>f.value=!0),class:"btn-primary"},[...e[10]||(e[10]=[t("i",{class:"fas fa-exchange-alt mr-2"},null,-1),d("New Transfer ",-1)])])]),t("div",z,[t("div",Q,[t("div",null,[e[13]||(e[13]=t("label",{class:"label"},"Branch",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.branch_id=s),class:"input-field",onChange:g},[e[12]||(e[12]=t("option",{value:""},"All Branches",-1)),(a(!0),r(x,null,b(o.branches,s=>(a(),r("option",{key:s.id,value:s.id},l(s.name),9,K))),128))],544),[[c,i.branch_id]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"label"},"Status",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.status=s),class:"input-field",onChange:g},[...e[14]||(e[14]=[t("option",{value:""},"All Status",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"pending"},"Pending",-1)])],544),[[c,i.status]])]),t("div",{class:"flex items-end"},[t("button",{onClick:F,class:"btn-secondary w-full"},[...e[16]||(e[16]=[t("i",{class:"fas fa-times mr-2"},null,-1),d("Clear Filters ",-1)])])])])]),t("div",G,[t("div",I,[t("table",J,[e[20]||(e[20]=t("thead",{class:"bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Product"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"From"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"To"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Quantity"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"By")])],-1)),t("tbody",R,[o.transfers.data.length===0?(a(),r("tr",W,[...e[17]||(e[17]=[t("td",{colspan:"6",class:"px-6 py-12 text-center"},[t("i",{class:"fas fa-truck text-6xl text-gray-300 dark:text-gray-600 mb-4"}),t("p",{class:"text-lg font-medium text-gray-900 dark:text-white mb-1"},"No Transfers"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No stock transfers have been made")],-1)])])):y("",!0),(a(!0),r(x,null,b(o.transfers.data,s=>{var w,_,S,T,B;return a(),r("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-slate-800/50"},[t("td",X,l(D(s.created_at)),1),t("td",Y,[t("p",Z,l((w=s.product)==null?void 0:w.name),1),t("p",tt,"SKU: "+l((_=s.product)==null?void 0:_.sku),1)]),t("td",et,[t("span",st,[e[18]||(e[18]=t("i",{class:"fas fa-arrow-up mr-1"},null,-1)),d(l((S=s.branch)==null?void 0:S.name),1)])]),t("td",at,[t("span",rt,[e[19]||(e[19]=t("i",{class:"fas fa-arrow-down mr-1"},null,-1)),d(l(((T=s.toBranch)==null?void 0:T.name)||"N/A"),1)])]),t("td",lt,[t("span",nt,l(Math.abs(s.quantity)),1)]),t("td",ot,[t("span",dt,l((B=s.user)==null?void 0:B.name),1),s.notes?(a(),r("p",it,l(s.notes),1)):y("",!0)])])}),128))])])]),o.transfers.data.length>0?(a(),r("div",ut,[t("div",xt,[t("p",pt,[e[21]||(e[21]=d(" Showing ",-1)),t("span",mt,l(o.transfers.from),1),e[22]||(e[22]=d(" to ",-1)),t("span",bt,l(o.transfers.to),1),e[23]||(e[23]=d(" of ",-1)),t("span",ft,l(o.transfers.total),1),e[24]||(e[24]=d(" results ",-1))]),t("div",yt,[(a(!0),r(x,null,b(o.transfers.links,s=>(a(),r(x,{key:s.label},[s.url?(a(),V(A(P),{key:0,href:s.url,class:N(["px-3 py-1 text-sm rounded-lg border",s.active?"bg-brand-600 text-white border-brand-600":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(a(),r("span",{key:1,class:N(["px-3 py-1 text-sm rounded-lg border opacity-50 cursor-not-allowed bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,ct))],64))),128))])])])):y("",!0)])]),f.value?(a(),r("div",gt,[t("div",{class:"fixed inset-0 bg-black/50",onClick:e[3]||(e[3]=s=>f.value=!1)}),t("div",vt,[e[34]||(e[34]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"New Stock Transfer",-1)),t("form",{onSubmit:H(j,["prevent"]),class:"space-y-4"},[t("div",null,[e[26]||(e[26]=t("label",{class:"label"},"Product *",-1)),u(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>n.product_id=s),class:"input-field",required:""},[e[25]||(e[25]=t("option",{value:""},"Select Product",-1)),(a(!0),r(x,null,b(o.products,s=>(a(),r("option",{key:s.id,value:s.id},l(s.name)+" ("+l(s.sku)+")",9,kt))),128))],512),[[c,n.product_id]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"label"},"From Branch *",-1)),u(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>n.from_branch_id=s),class:"input-field",required:""},[e[27]||(e[27]=t("option",{value:""},"Select Source Branch",-1)),(a(!0),r(x,null,b(o.branches,s=>(a(),r("option",{key:s.id,value:s.id},l(s.name),9,ht))),128))],512),[[c,n.from_branch_id]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"label"},"To Branch *",-1)),u(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>n.to_branch_id=s),class:"input-field",required:""},[e[29]||(e[29]=t("option",{value:""},"Select Destination Branch",-1)),(a(!0),r(x,null,b(o.branches,s=>(a(),r("option",{key:s.id,value:s.id,disabled:s.id===n.from_branch_id},l(s.name),9,wt))),128))],512),[[c,n.to_branch_id]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"label"},"Quantity *",-1)),u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>n.quantity=s),type:"number",step:"0.01",min:"0.01",class:"input-field",placeholder:"e.g., 10",required:""},null,512),[[U,n.quantity]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"label"},"Notes",-1)),u(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=s=>n.notes=s),class:"input-field",rows:"2",placeholder:"Transfer reason or notes..."},null,512),[[U,n.notes]])]),p.value?(a(),r("div",_t,[t("p",St,l(p.value),1)])):y("",!0),t("div",Tt,[t("button",{type:"button",onClick:e[9]||(e[9]=s=>f.value=!1),class:"btn-secondary flex-1"},"Cancel"),e[33]||(e[33]=t("button",{type:"submit",class:"btn-primary flex-1"},[t("i",{class:"fas fa-exchange-alt mr-2"}),d("Transfer ")],-1))])],32)])])):y("",!0)]),_:1}))}};export{Nt as default};
