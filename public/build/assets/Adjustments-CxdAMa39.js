import{s as N,r as U,c as V,w as F,a as t,d as r,h as f,g as u,b as i,o as a,F as x,e as m,t as l,f as v,v as y,n as k,u as L,l as T,p as H,j as q}from"./app-C6lt1uQR.js";import{_ as $}from"./AdminLayout-CmvtP4AP.js";import"./NavLink-CZ7tcFJn.js";import"./useFlashMessages-DqH0SBLZ.js";const O={class:"space-y-6"},P={class:"flex items-center justify-between"},z={class:"card p-6"},E={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Q=["value"],R={class:"card overflow-hidden"},K={class:"overflow-x-auto"},G={class:"w-full"},I={class:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700"},J={key:0},W={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},X={class:"px-6 py-4"},Y={class:"font-medium text-gray-900 dark:text-white"},Z={class:"text-sm text-gray-500 dark:text-gray-400"},tt={class:"px-6 py-4"},et={class:"px-2.5 py-1 text-xs font-medium bg-gray-100 dark:bg-slate-700 rounded"},st={class:"px-6 py-4 text-right"},at={class:"px-6 py-4"},lt={class:"text-sm text-gray-900 dark:text-white"},rt={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},dt={class:"px-6 py-4"},ot={class:"text-sm text-gray-900 dark:text-white"},nt={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-slate-700"},it={class:"flex items-center justify-between"},ut={class:"text-sm text-gray-700 dark:text-gray-300"},xt={class:"font-medium"},pt={class:"font-medium"},mt={class:"font-medium"},yt={class:"flex gap-2"},gt=["innerHTML"],bt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ft={class:"relative bg-white dark:bg-slate-900 rounded-xl p-6 max-w-md w-full shadow-2xl"},ct=["value"],vt=["value"],kt={class:"flex gap-3 pt-2"},_t={__name:"Adjustments",props:{adjustments:Object,branches:Array,products:Array,filters:Object},setup(o){var w,h,S;const c=o,p=N(!1),n=U({branch_id:((w=c.filters)==null?void 0:w.branch_id)||"",date_from:((h=c.filters)==null?void 0:h.date_from)||"",date_to:((S=c.filters)==null?void 0:S.date_to)||""}),d=U({product_id:"",branch_id:"",quantity:"",reason:"",notes:""}),g=()=>{q.get(route("admin.inventory.adjustments"),n,{preserveState:!0,preserveScroll:!0})},B=()=>{n.branch_id="",n.date_from="",n.date_to="",g()},D=()=>{q.post(route("admin.inventory.adjustments.store"),d,{onSuccess:()=>{p.value=!1,Object.keys(d).forEach(b=>d[b]="")}})},M=b=>new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(b,e)=>(a(),V($,{"page-title":"Stock Adjustments"},{default:F(()=>[t("div",O,[t("div",P,[e[12]||(e[12]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Stock Adjustments"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Manual inventory corrections and adjustments")],-1)),t("button",{onClick:e[0]||(e[0]=s=>p.value=!0),class:"btn-primary"},[...e[11]||(e[11]=[t("i",{class:"fas fa-plus mr-2"},null,-1),u("New Adjustment ",-1)])])]),t("div",z,[t("div",E,[t("div",null,[e[14]||(e[14]=t("label",{class:"label"},"Branch",-1)),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.branch_id=s),class:"input-field",onChange:g},[e[13]||(e[13]=t("option",{value:""},"All Branches",-1)),(a(!0),r(x,null,m(o.branches,s=>(a(),r("option",{key:s.id,value:s.id},l(s.name),9,Q))),128))],544),[[v,n.branch_id]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"label"},"Date From",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.date_from=s),type:"date",class:"input-field",onChange:g},null,544),[[y,n.date_from]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"label"},"Date To",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.date_to=s),type:"date",class:"input-field",onChange:g},null,544),[[y,n.date_to]])]),t("div",{class:"flex items-end"},[t("button",{onClick:B,class:"btn-secondary w-full"},[...e[17]||(e[17]=[t("i",{class:"fas fa-times mr-2"},null,-1),u("Clear ",-1)])])])])]),t("div",R,[t("div",K,[t("table",G,[e[19]||(e[19]=t("thead",{class:"bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Date"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Product"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"Branch"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Quantity"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Reason"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"By")])],-1)),t("tbody",I,[o.adjustments.data.length===0?(a(),r("tr",J,[...e[18]||(e[18]=[t("td",{colspan:"6",class:"px-6 py-12 text-center"},[t("i",{class:"fas fa-clipboard-list text-6xl text-gray-300 dark:text-gray-600 mb-4"}),t("p",{class:"text-lg font-medium text-gray-900 dark:text-white mb-1"},"No Adjustments"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No stock adjustments have been made")],-1)])])):f("",!0),(a(!0),r(x,null,m(o.adjustments.data,s=>{var j,_,C,A;return a(),r("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-slate-800/50"},[t("td",W,l(M(s.created_at)),1),t("td",X,[t("p",Y,l((j=s.product)==null?void 0:j.name),1),t("p",Z,"SKU: "+l((_=s.product)==null?void 0:_.sku),1)]),t("td",tt,[t("span",et,l((C=s.branch)==null?void 0:C.name),1)]),t("td",st,[t("span",{class:k(["text-lg font-semibold",s.quantity>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"])},l(s.quantity>=0?"+":"")+l(s.quantity),3)]),t("td",at,[t("p",lt,l(s.reference||"-"),1),s.notes?(a(),r("p",rt,l(s.notes),1)):f("",!0)]),t("td",dt,[t("span",ot,l((A=s.user)==null?void 0:A.name),1)])])}),128))])])]),o.adjustments.data.length>0?(a(),r("div",nt,[t("div",it,[t("p",ut,[e[20]||(e[20]=u(" Showing ",-1)),t("span",xt,l(o.adjustments.from),1),e[21]||(e[21]=u(" to ",-1)),t("span",pt,l(o.adjustments.to),1),e[22]||(e[22]=u(" of ",-1)),t("span",mt,l(o.adjustments.total),1),e[23]||(e[23]=u(" results ",-1))]),t("div",yt,[(a(!0),r(x,null,m(o.adjustments.links,s=>(a(),r(x,{key:s.label},[s.url?(a(),V(L(T),{key:0,href:s.url,class:k(["px-3 py-1 text-sm rounded-lg border",s.active?"bg-emerald-600 text-white border-emerald -600":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(a(),r("span",{key:1,class:k(["px-3 py-1 text-sm rounded-lg border opacity-50 cursor-not-allowed bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,gt))],64))),128))])])])):f("",!0)])]),p.value?(a(),r("div",bt,[t("div",{class:"fixed inset-0 bg-black/50",onClick:e[4]||(e[4]=s=>p.value=!1)}),t("div",ft,[e[33]||(e[33]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"New Stock Adjustment",-1)),t("form",{onSubmit:H(D,["prevent"]),class:"space-y-4"},[t("div",null,[e[25]||(e[25]=t("label",{class:"label"},"Product *",-1)),i(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>d.product_id=s),class:"input-field",required:""},[e[24]||(e[24]=t("option",{value:""},"Select Product",-1)),(a(!0),r(x,null,m(o.products,s=>(a(),r("option",{key:s.id,value:s.id},l(s.name)+" ("+l(s.sku)+")",9,ct))),128))],512),[[v,d.product_id]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"label"},"Branch *",-1)),i(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>d.branch_id=s),class:"input-field",required:""},[e[26]||(e[26]=t("option",{value:""},"Select Branch",-1)),(a(!0),r(x,null,m(o.branches,s=>(a(),r("option",{key:s.id,value:s.id},l(s.name),9,vt))),128))],512),[[v,d.branch_id]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"label"},"Quantity *",-1)),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>d.quantity=s),type:"number",step:"0.01",class:"input-field",placeholder:"e.g., 10 or -5",required:""},null,512),[[y,d.quantity]]),e[29]||(e[29]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Use negative numbers to reduce stock",-1))]),t("div",null,[e[30]||(e[30]=t("label",{class:"label"},"Reason *",-1)),i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>d.reason=s),type:"text",class:"input-field",placeholder:"e.g., Damage, Loss, Found",required:""},null,512),[[y,d.reason]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"label"},"Notes",-1)),i(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=s=>d.notes=s),class:"input-field",rows:"2",placeholder:"Additional details..."},null,512),[[y,d.notes]])]),t("div",kt,[t("button",{type:"button",onClick:e[10]||(e[10]=s=>p.value=!1),class:"btn-secondary flex-1"},"Cancel"),e[32]||(e[32]=t("button",{type:"submit",class:"btn-primary flex-1"},[t("i",{class:"fas fa-save mr-2"}),u("Save ")],-1))])],32)])])):f("",!0)]),_:1}))}};export{_t as default};
