import{s as T,r as O,m as P,c as A,w as H,a as t,d as o,h as m,g as x,t as d,b as i,v as p,f as k,o as n,F as _,e as D,n as y,u as l,l as I,p as z,q as Y,j as M}from"./app-xtd10Mqh.js";import{_ as G}from"./AdminLayout-CiSsArE9.js";import{c as J}from"./useFlashMessages-uyAZyciG.js";import"./NavLink-DvhtSBKV.js";const K={class:"space-y-6"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},R={class:"card p-6"},W={class:"flex items-center justify-between"},X={class:"text-3xl font-bold text-gray-900 dark:text-white"},Z={class:"card p-6"},tt={class:"flex items-center justify-between"},et={class:"text-3xl font-bold text-brand-600 dark:text-brand-400"},st={class:"card p-6"},at={class:"flex items-center justify-between"},lt={class:"text-3xl font-bold text-orange-600 dark:text-orange-400"},rt={class:"card p-6"},dt={class:"flex items-center justify-between"},nt={class:"text-3xl font-bold text-red-600 dark:text-red-400"},ot={class:"card p-6"},it={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ut={class:"md:col-span-2"},pt={class:"relative"},xt={class:"card overflow-hidden"},mt={class:"overflow-x-auto"},gt={class:"w-full"},ct={class:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700"},bt={key:0},yt={class:"px-6 py-4"},ft={class:"font-mono font-bold text-brand-600 dark:text-brand-400"},vt={class:"text-sm text-gray-600 dark:text-gray-400"},kt={class:"px-6 py-4"},_t={class:"px-6 py-4 text-right"},wt={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ct={class:"px-6 py-4 text-center"},ht={class:"text-sm text-gray-600 dark:text-gray-400"},Ut={key:0},St={class:"px-6 py-4"},Vt={key:0,class:"text-sm text-gray-600 dark:text-gray-400"},jt={key:1,class:"text-sm text-gray-500 dark:text-gray-500"},Tt={class:"px-6 py-4 text-center"},At={class:"px-6 py-4"},Dt={class:"flex items-center justify-center gap-2"},Mt=["onClick"],$t=["onClick"],Ft={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-slate-700"},Et={class:"flex items-center justify-between"},Nt={class:"text-sm text-gray-700 dark:text-gray-300"},Lt={class:"font-medium"},qt={class:"font-medium"},Bt={class:"font-medium"},Ot={class:"flex gap-2"},Pt=["innerHTML"],Ht={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},It={class:"relative bg-white dark:bg-slate-900 rounded-xl p-6 max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-y-auto"},zt={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Yt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Gt={class:"flex gap-2"},Jt={key:0,class:"text-red-500 text-sm mt-1"},Kt={key:0,class:"text-red-500 text-sm mt-1"},Qt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Rt=["placeholder"],Wt={key:0,class:"text-red-500 text-sm mt-1"},Xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Zt={key:0},te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg"},ae={class:"flex gap-3 pt-2"},le=["disabled"],ie={__name:"Coupons",props:{coupons:Object,stats:Object,filters:Object},setup(u){var S,V,j;const f=u,g=T(!1),b=T(null),c=O({search:((S=f.filters)==null?void 0:S.search)||"",status:((V=f.filters)==null?void 0:V.status)||"",type:((j=f.filters)==null?void 0:j.type)||""}),a=P({code:"",name:"",description:"",type:"percentage",value:"",min_order_amount:"",max_discount:"",usage_limit:"",usage_per_customer:"",start_date:"",end_date:"",is_active:!0});let w=null;const $=()=>{clearTimeout(w),w=setTimeout(()=>{v()},500)},v=()=>{M.get(route("admin.coupons.index"),c,{preserveState:!0,preserveScroll:!0})},C=()=>{b.value=null,a.reset(),a.is_active=!0,g.value=!0},F=r=>{b.value=r,a.code=r.code,a.name=r.name,a.description=r.description||"",a.type=r.type,a.value=r.value,a.min_order_amount=r.min_order_amount||"",a.max_discount=r.max_discount||"",a.usage_limit=r.usage_limit||"",a.usage_per_customer=r.usage_per_customer||"",a.start_date=r.start_date||"",a.end_date=r.end_date||"",a.is_active=r.is_active,g.value=!0},E=()=>{b.value?a.put(route("admin.coupons.update",b.value.id),{onSuccess:()=>{g.value=!1,a.reset()}}):a.post(route("admin.coupons.store"),{onSuccess:()=>{g.value=!1,a.reset()}})},N=async()=>{const e=await(await fetch(route("admin.coupons.generate-code"))).json();a.code=e.code},L=async r=>{(await J({title:"Delete Coupon?",text:`Are you sure you want to delete "${r.code}"? This action cannot be undone.`,icon:"warning",confirmButtonText:"Yes, delete it!"})).isConfirmed&&M.delete(route("admin.coupons.destroy",r.id),{preserveScroll:!0})},h=r=>r?new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",U=r=>r.is_active?r.end_date&&new Date(r.end_date)<new Date?"Expired":r.usage_limit&&r.times_used>=r.usage_limit?"Used Up":"Active":"Inactive",q=r=>{const e="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium";switch(U(r)){case"Active":return`${e} bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400`;case"Inactive":return`${e} bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400`;case"Expired":case"Used Up":return`${e} bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400`;default:return`${e} bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400`}};return(r,e)=>(n(),A(G,{"page-title":"Coupons & Vouchers"},{default:H(()=>[t("div",K,[t("div",{class:"flex items-center justify-between"},[e[18]||(e[18]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Coupons & Vouchers"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Manage discount coupons and promotional vouchers")],-1)),t("button",{onClick:C,class:"btn-primary"},[...e[17]||(e[17]=[t("i",{class:"fas fa-plus mr-2"},null,-1),x("Create Coupon ",-1)])])]),t("div",Q,[t("div",R,[t("div",W,[t("div",null,[e[19]||(e[19]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"Total Coupons",-1)),t("p",X,d(u.stats.total_coupons),1)]),e[20]||(e[20]=t("div",{class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center"},[t("i",{class:"fas fa-ticket-alt text-blue-600 dark:text-blue-400 text-xl"})],-1))])]),t("div",Z,[t("div",tt,[t("div",null,[e[21]||(e[21]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"Active Coupons",-1)),t("p",et,d(u.stats.active_coupons),1)]),e[22]||(e[22]=t("div",{class:"w-12 h-12 bg-brand-100 dark:bg-brand-900/30 rounded-xl flex items-center justify-center"},[t("i",{class:"fas fa-check-circle text-brand-600 dark:text-brand-400 text-xl"})],-1))])]),t("div",st,[t("div",at,[t("div",null,[e[23]||(e[23]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"Total Uses",-1)),t("p",lt,d(u.stats.total_uses),1)]),e[24]||(e[24]=t("div",{class:"w-12 h-12 bg-orange-100 dark:bg-orange-900/30 rounded-xl flex items-center justify-center"},[t("i",{class:"fas fa-shopping-cart text-orange-600 dark:text-orange-400 text-xl"})],-1))])]),t("div",rt,[t("div",dt,[t("div",null,[e[25]||(e[25]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-1"},"Expired",-1)),t("p",nt,d(u.stats.expired),1)]),e[26]||(e[26]=t("div",{class:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center"},[t("i",{class:"fas fa-clock text-red-600 dark:text-red-400 text-xl"})],-1))])])]),t("div",ot,[t("div",it,[t("div",ut,[e[28]||(e[28]=t("label",{class:"label"},"Search",-1)),t("div",pt,[e[27]||(e[27]=t("i",{class:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm pointer-events-none"},null,-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.search=s),type:"text",class:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-brand-500 focus:border-brand-500",placeholder:"Search by code or name...",onInput:$},null,544),[[p,c.search]])])]),t("div",null,[e[30]||(e[30]=t("label",{class:"label"},"Status",-1)),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.status=s),class:"input-field",onChange:v},[...e[29]||(e[29]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1),t("option",{value:"expired"},"Expired",-1)])],544),[[k,c.status]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"label"},"Type",-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>c.type=s),class:"input-field",onChange:v},[...e[31]||(e[31]=[t("option",{value:""},"All Types",-1),t("option",{value:"percentage"},"Percentage",-1),t("option",{value:"fixed"},"Fixed Amount",-1)])],544),[[k,c.type]])])])]),t("div",xt,[t("div",mt,[t("table",gt,[e[39]||(e[39]=t("thead",{class:"bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Coupon"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Type"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Value"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Usage"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"Valid Period"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-28"},"Status"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Actions")])],-1)),t("tbody",ct,[u.coupons.data.length===0?(n(),o("tr",bt,[t("td",{colspan:"7",class:"px-6 py-12 text-center"},[e[34]||(e[34]=t("i",{class:"fas fa-ticket-alt text-6xl text-gray-300 dark:text-gray-600 mb-4"},null,-1)),e[35]||(e[35]=t("p",{class:"text-lg font-medium text-gray-900 dark:text-white mb-1"},"No coupons found",-1)),e[36]||(e[36]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},"Create your first coupon to get started",-1)),t("button",{onClick:C,class:"btn-primary"},[...e[33]||(e[33]=[t("i",{class:"fas fa-plus mr-2"},null,-1),x("Create Coupon ",-1)])])])])):m("",!0),(n(!0),o(_,null,D(u.coupons.data,s=>(n(),o("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-slate-800/50"},[t("td",yt,[t("div",null,[t("p",ft,d(s.code),1),t("p",vt,d(s.name),1)])]),t("td",kt,[t("span",{class:y(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium",s.type==="percentage"?"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400":"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"])},d(s.type==="percentage"?"Percentage":"Fixed"),3)]),t("td",_t,[t("span",wt,d(s.type==="percentage"?s.value+"%":"$"+Number(s.value).toFixed(2)),1)]),t("td",Ct,[t("span",ht,[x(d(s.times_used),1),s.usage_limit?(n(),o("span",Ut," / "+d(s.usage_limit),1)):m("",!0)])]),t("td",St,[s.start_date||s.end_date?(n(),o("p",Vt,d(h(s.start_date))+" - "+d(h(s.end_date)),1)):(n(),o("p",jt,"No expiry"))]),t("td",Tt,[t("span",{class:y(q(s))},d(U(s)),3)]),t("td",At,[t("div",Dt,[t("button",{onClick:B=>F(s),class:"px-3 py-1.5 text-xs font-medium bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"},[...e[37]||(e[37]=[t("i",{class:"fas fa-edit mr-1"},null,-1),x("Edit ",-1)])],8,Mt),t("button",{onClick:B=>L(s),class:"px-3 py-1.5 text-xs font-medium bg-red-600 text-white rounded hover:bg-red-700 transition-colors"},[...e[38]||(e[38]=[t("i",{class:"fas fa-trash"},null,-1)])],8,$t)])])]))),128))])])]),u.coupons.data.length>0?(n(),o("div",Ft,[t("div",Et,[t("p",Nt,[e[40]||(e[40]=x(" Showing ",-1)),t("span",Lt,d(u.coupons.from),1),e[41]||(e[41]=x(" to ",-1)),t("span",qt,d(u.coupons.to),1),e[42]||(e[42]=x(" of ",-1)),t("span",Bt,d(u.coupons.total),1),e[43]||(e[43]=x(" results ",-1))]),t("div",Ot,[(n(!0),o(_,null,D(u.coupons.links,s=>(n(),o(_,{key:s.label},[s.url?(n(),A(l(I),{key:0,href:s.url,class:y(["px-3 py-1 text-sm rounded-lg border",s.active?"bg-brand-600 text-white border-brand-600":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(n(),o("span",{key:1,class:y(["px-3 py-1 text-sm rounded-lg border opacity-50 cursor-not-allowed bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,Pt))],64))),128))])])])):m("",!0)])]),g.value?(n(),o("div",Ht,[t("div",{class:"fixed inset-0 bg-black/50",onClick:e[3]||(e[3]=s=>g.value=!1)}),t("div",It,[t("h3",zt,d(b.value?"Edit Coupon":"Create New Coupon"),1),t("form",{onSubmit:z(E,["prevent"]),class:"space-y-4"},[t("div",Yt,[t("div",null,[e[45]||(e[45]=t("label",{class:"label"},"Coupon Code *",-1)),t("div",Gt,[i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l(a).code=s),type:"text",class:"input-field flex-1 uppercase",placeholder:"e.g., SAVE20",required:""},null,512),[[p,l(a).code]]),t("button",{type:"button",onClick:N,class:"btn-secondary text-sm"},[...e[44]||(e[44]=[t("i",{class:"fas fa-random"},null,-1)])])]),l(a).errors.code?(n(),o("p",Jt,d(l(a).errors.code),1)):m("",!0)]),t("div",null,[e[46]||(e[46]=t("label",{class:"label"},"Name *",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l(a).name=s),type:"text",class:"input-field",placeholder:"e.g., Summer Sale 20%",required:""},null,512),[[p,l(a).name]]),l(a).errors.name?(n(),o("p",Kt,d(l(a).errors.name),1)):m("",!0)])]),t("div",null,[e[47]||(e[47]=t("label",{class:"label"},"Description",-1)),i(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>l(a).description=s),class:"input-field",rows:"2",placeholder:"Optional description..."},null,512),[[p,l(a).description]])]),t("div",Qt,[t("div",null,[e[49]||(e[49]=t("label",{class:"label"},"Discount Type *",-1)),i(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>l(a).type=s),class:"input-field",required:""},[...e[48]||(e[48]=[t("option",{value:"percentage"},"Percentage (%)",-1),t("option",{value:"fixed"},"Fixed Amount ($)",-1)])],512),[[k,l(a).type]])]),t("div",null,[e[50]||(e[50]=t("label",{class:"label"},"Value *",-1)),i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>l(a).value=s),type:"number",step:"0.01",min:"0",class:"input-field",placeholder:l(a).type==="percentage"?"e.g., 20":"e.g., 10.00",required:""},null,8,Rt),[[p,l(a).value]]),l(a).errors.value?(n(),o("p",Wt,d(l(a).errors.value),1)):m("",!0)])]),t("div",Xt,[t("div",null,[e[51]||(e[51]=t("label",{class:"label"},"Minimum Order Amount",-1)),i(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>l(a).min_order_amount=s),type:"number",step:"0.01",min:"0",class:"input-field",placeholder:"e.g., 50.00"},null,512),[[p,l(a).min_order_amount]])]),l(a).type==="percentage"?(n(),o("div",Zt,[e[52]||(e[52]=t("label",{class:"label"},"Maximum Discount",-1)),i(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>l(a).max_discount=s),type:"number",step:"0.01",min:"0",class:"input-field",placeholder:"e.g., 100.00"},null,512),[[p,l(a).max_discount]])])):m("",!0)]),t("div",te,[t("div",null,[e[53]||(e[53]=t("label",{class:"label"},"Usage Limit (Total)",-1)),i(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>l(a).usage_limit=s),type:"number",min:"1",class:"input-field",placeholder:"Unlimited"},null,512),[[p,l(a).usage_limit]])]),t("div",null,[e[54]||(e[54]=t("label",{class:"label"},"Usage Per Customer",-1)),i(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>l(a).usage_per_customer=s),type:"number",min:"1",class:"input-field",placeholder:"Unlimited"},null,512),[[p,l(a).usage_per_customer]])])]),t("div",ee,[t("div",null,[e[55]||(e[55]=t("label",{class:"label"},"Start Date",-1)),i(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>l(a).start_date=s),type:"date",class:"input-field"},null,512),[[p,l(a).start_date]])]),t("div",null,[e[56]||(e[56]=t("label",{class:"label"},"End Date",-1)),i(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>l(a).end_date=s),type:"date",class:"input-field"},null,512),[[p,l(a).end_date]])])]),t("div",se,[i(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>l(a).is_active=s),type:"checkbox",id:"is_active",class:"w-5 h-5 text-brand-600 rounded border-gray-300 focus:ring-brand-500"},null,512),[[Y,l(a).is_active]]),e[57]||(e[57]=t("label",{for:"is_active",class:"text-sm font-medium text-gray-900 dark:text-white cursor-pointer"},"Active",-1))]),t("div",ae,[t("button",{type:"button",onClick:e[16]||(e[16]=s=>g.value=!1),class:"btn-secondary flex-1 flex items-center justify-center"},"Cancel"),t("button",{type:"submit",class:"btn-primary flex-1 flex items-center justify-center",disabled:l(a).processing},[e[58]||(e[58]=t("i",{class:"fas fa-save mr-2"},null,-1)),x(d(l(a).processing?"Saving...":"Save Coupon"),1)],8,le)])],32)])])):m("",!0)]),_:1}))}};export{ie as default};
