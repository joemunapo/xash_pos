import{r as C,c as k,w as $,a as t,b as _,d as n,o as a,F as x,e as p,t as r,f as v,g as i,h as w,n as g,u as M,l as F,j as L}from"./app-DHqUTiQs.js";import{_ as N}from"./AdminLayout-BtulkRvh.js";import"./NavLink-De0s0I7C.js";import"./useFlashMessages-BBgF2e5c.js";const T={class:"space-y-6"},V={class:"card p-6"},j={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},H={class:"md:col-span-2"},U=["value"],A={class:"card overflow-hidden"},I={class:"overflow-x-auto"},O={class:"w-full"},q={class:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700"},z={key:0},K={class:"px-6 py-4"},P={class:"font-medium text-gray-900 dark:text-white"},Q={class:"text-sm text-gray-500 dark:text-gray-400"},G={class:"px-6 py-4"},J={class:"px-2.5 py-1 text-xs font-medium bg-gray-100 dark:bg-slate-700 rounded"},R={class:"px-6 py-4"},W={class:"font-mono text-sm text-gray-900 dark:text-white"},X={class:"px-6 py-4 text-right"},Y={class:"text-lg font-semibold text-gray-900 dark:text-white"},Z={class:"px-6 py-4 text-center"},tt={class:"text-sm text-gray-900 dark:text-white"},et={class:"px-6 py-4 text-center"},st={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-slate-700"},at={class:"flex items-center justify-between"},rt={class:"text-sm text-gray-700 dark:text-gray-300"},dt={class:"font-medium"},nt={class:"font-medium"},lt={class:"font-medium"},ot={class:"flex gap-2"},it=["innerHTML"],yt={__name:"Expiring",props:{expiringBatches:Object,branches:Array,filters:Object},setup(d){var u,m;const y=d,l=C({branch_id:((u=y.filters)==null?void 0:u.branch_id)||"",days:((m=y.filters)==null?void 0:m.days)||"30"}),c=()=>{L.get(route("admin.inventory.expiring"),l,{preserveState:!0,preserveScroll:!0})},B=()=>{l.branch_id="",l.days="30",c()},D=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),S=o=>{const e=Math.ceil((new Date(o)-new Date)/864e5);return e<0?"Expired":e<=7?`${e}d left`:e<=30?`${e}d left`:`${e}d left`},E=o=>{const e=Math.ceil((new Date(o)-new Date)/864e5),s="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium";return e<0?`${s} bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400`:e<=7?`${s} bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400`:e<=30?`${s} bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400`:`${s} bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400`};return(o,e)=>(a(),k(N,{"page-title":"Expiring Items"},{default:$(()=>[t("div",T,[e[13]||(e[13]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Expiring Items"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Batches approaching expiry date")],-1)),t("div",V,[t("div",j,[t("div",H,[e[3]||(e[3]=t("label",{class:"label"},"Branch",-1)),_(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.branch_id=s),class:"input-field",onChange:c},[e[2]||(e[2]=t("option",{value:""},"All Branches",-1)),(a(!0),n(x,null,p(d.branches,s=>(a(),n("option",{key:s.id,value:s.id},r(s.name),9,U))),128))],544),[[v,l.branch_id]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"label"},"Days Ahead",-1)),_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.days=s),class:"input-field",onChange:c},[...e[4]||(e[4]=[t("option",{value:"7"},"7 Days",-1),t("option",{value:"14"},"14 Days",-1),t("option",{value:"30"},"30 Days",-1),t("option",{value:"60"},"60 Days",-1),t("option",{value:"90"},"90 Days",-1)])],544),[[v,l.days]])]),t("div",{class:"flex items-end"},[t("button",{onClick:B,class:"btn-secondary w-full"},[...e[6]||(e[6]=[t("i",{class:"fas fa-times mr-2"},null,-1),i("Clear Filters ",-1)])])])])]),t("div",A,[t("div",I,[t("table",O,[e[8]||(e[8]=t("thead",{class:"bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Product"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"Branch"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"Batch #"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Quantity"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-40"},"Expiry Date"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase w-32"},"Status")])],-1)),t("tbody",q,[d.expiringBatches.data.length===0?(a(),n("tr",z,[...e[7]||(e[7]=[t("td",{colspan:"6",class:"px-6 py-12 text-center"},[t("i",{class:"fas fa-calendar-check text-6xl text-brand-500 mb-4"}),t("p",{class:"text-lg font-medium text-gray-900 dark:text-white mb-1"},"No Expiring Items"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"No batches are expiring in the selected period")],-1)])])):w("",!0),(a(!0),n(x,null,p(d.expiringBatches.data,s=>{var f,b,h;return a(),n("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-slate-800/50"},[t("td",K,[t("p",P,r((f=s.product)==null?void 0:f.name),1),t("p",Q,"SKU: "+r((b=s.product)==null?void 0:b.sku),1)]),t("td",G,[t("span",J,r((h=s.branch)==null?void 0:h.name),1)]),t("td",R,[t("span",W,r(s.batch_number),1)]),t("td",X,[t("span",Y,r(s.quantity_remaining),1)]),t("td",Z,[t("span",tt,r(D(s.expiry_date)),1)]),t("td",et,[t("span",{class:g(E(s.expiry_date))},r(S(s.expiry_date)),3)])])}),128))])])]),d.expiringBatches.data.length>0?(a(),n("div",st,[t("div",at,[t("p",rt,[e[9]||(e[9]=i(" Showing ",-1)),t("span",dt,r(d.expiringBatches.from),1),e[10]||(e[10]=i(" to ",-1)),t("span",nt,r(d.expiringBatches.to),1),e[11]||(e[11]=i(" of ",-1)),t("span",lt,r(d.expiringBatches.total),1),e[12]||(e[12]=i(" results ",-1))]),t("div",ot,[(a(!0),n(x,null,p(d.expiringBatches.links,s=>(a(),n(x,{key:s.label},[s.url?(a(),k(M(F),{key:0,href:s.url,class:g(["px-3 py-1 text-sm rounded-lg border",s.active?"bg-brand-600 text-white border-brand-600":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(a(),n("span",{key:1,class:g(["px-3 py-1 text-sm rounded-lg border opacity-50 cursor-not-allowed bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,it))],64))),128))])])])):w("",!0)])])]),_:1}))}};export{yt as default};
