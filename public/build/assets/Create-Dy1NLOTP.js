import{m as U,c as F,w as h,a as t,p as P,g as c,b as u,d as o,h as m,u as l,o as d,F as y,e as f,t as i,f as v,v as b,i as I,l as $}from"./app-xtd10Mqh.js";import{_ as D}from"./AdminLayout-CiSsArE9.js";import"./NavLink-DvhtSBKV.js";import"./useFlashMessages-uyAZyciG.js";const O={class:"space-y-6"},T={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},j={class:"card p-6"},A={class:"space-y-4"},B=["value"],N={key:0,class:"text-red-500 text-sm mt-1"},M=["value"],E={key:0,class:"text-red-500 text-sm mt-1"},L={class:"card p-6"},Q={class:"space-y-4"},R={class:"grid grid-cols-2 gap-4"},z={key:0,class:"text-red-500 text-sm mt-1"},G={key:0,class:"text-red-500 text-sm mt-1"},H={class:"card p-6"},J={class:"space-y-3"},K={class:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end"},W={class:"md:col-span-5"},X=["onUpdate:modelValue","onChange"],Y=["value"],Z={class:"md:col-span-2"},tt=["onUpdate:modelValue","onInput"],et={class:"md:col-span-2"},st=["onUpdate:modelValue","onInput"],rt={class:"md:col-span-2"},lt=["value"],dt={class:"md:col-span-1"},at=["onClick"],ot={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},it={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-slate-700"},nt={class:"flex justify-end"},ut={class:"w-full md:w-64 space-y-2"},pt={class:"flex justify-between text-sm"},ct={class:"font-semibold text-gray-900 dark:text-white"},mt={class:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200 dark:border-slate-700"},bt={class:"text-brand-600 dark:text-brand-400"},xt={class:"flex items-center justify-end gap-3"},yt=["disabled"],kt={__name:"Create",props:{suppliers:Array,branches:Array,products:Array},setup(x){const w=x,s=U({supplier_id:"",branch_id:"",order_date:new Date().toISOString().split("T")[0],expected_delivery:"",items:[],notes:""}),_=()=>{s.items.push({product_id:"",quantity:1,unit_price:0})},V=n=>{s.items.splice(n,1)},C=n=>{const e=s.items[n],r=w.products.find(p=>p.id===e.product_id);r&&(e.unit_price=parseFloat(r.cost_price||0)),g(n)},g=n=>{const e=s.items[n];e.total=(parseFloat(e.quantity)||0)*(parseFloat(e.unit_price)||0)},k=()=>s.items.reduce((n,e)=>n+(parseFloat(e.quantity)||0)*(parseFloat(e.unit_price)||0),0),S=()=>k(),q=()=>{s.post(route("admin.purchase-orders.store"))};return s.items.length===0&&_(),(n,e)=>(d(),F(D,{"page-title":"Create Purchase Order"},{default:h(()=>[t("div",O,[e[27]||(e[27]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create Purchase Order"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Order products from supplier")],-1)),t("form",{onSubmit:P(q,["prevent"]),class:"space-y-6"},[t("div",T,[t("div",j,[e[9]||(e[9]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-slate-700"},[t("i",{class:"fas fa-truck mr-2 text-brand-500"}),c("Supplier & Destination ")],-1)),t("div",A,[t("div",null,[e[6]||(e[6]=t("label",{class:"label"},"Supplier *",-1)),u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>l(s).supplier_id=r),class:"input-field",required:""},[e[5]||(e[5]=t("option",{value:""},"Select Supplier",-1)),(d(!0),o(y,null,f(x.suppliers,r=>(d(),o("option",{key:r.id,value:r.id},i(r.name),9,B))),128))],512),[[v,l(s).supplier_id]]),l(s).errors.supplier_id?(d(),o("p",N,i(l(s).errors.supplier_id),1)):m("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{class:"label"},"Receiving Branch *",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>l(s).branch_id=r),class:"input-field",required:""},[e[7]||(e[7]=t("option",{value:""},"Select Branch",-1)),(d(!0),o(y,null,f(x.branches,r=>(d(),o("option",{key:r.id,value:r.id},i(r.name),9,M))),128))],512),[[v,l(s).branch_id]]),l(s).errors.branch_id?(d(),o("p",E,i(l(s).errors.branch_id),1)):m("",!0)])])]),t("div",L,[e[13]||(e[13]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-slate-700"},[t("i",{class:"fas fa-calendar mr-2 text-brand-500"}),c("Order Details ")],-1)),t("div",Q,[t("div",R,[t("div",null,[e[10]||(e[10]=t("label",{class:"label"},"Order Date *",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>l(s).order_date=r),type:"date",class:"input-field",required:""},null,512),[[b,l(s).order_date]]),l(s).errors.order_date?(d(),o("p",z,i(l(s).errors.order_date),1)):m("",!0)]),t("div",null,[e[11]||(e[11]=t("label",{class:"label"},"Expected Delivery",-1)),u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>l(s).expected_delivery=r),type:"date",class:"input-field"},null,512),[[b,l(s).expected_delivery]]),l(s).errors.expected_delivery?(d(),o("p",G,i(l(s).errors.expected_delivery),1)):m("",!0)])]),t("div",null,[e[12]||(e[12]=t("label",{class:"label"},"Notes",-1)),u(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=r=>l(s).notes=r),class:"input-field",rows:"2",placeholder:"Any special instructions..."},null,512),[[b,l(s).notes]])])])])]),t("div",H,[t("div",{class:"flex items-center justify-between mb-4 pb-2 border-b border-gray-200 dark:border-slate-700"},[e[15]||(e[15]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},[t("i",{class:"fas fa-boxes mr-2 text-brand-500"}),c("Products ")],-1)),t("button",{type:"button",onClick:_,class:"btn-secondary text-sm"},[...e[14]||(e[14]=[t("i",{class:"fas fa-plus mr-2"},null,-1),c("Add Product ",-1)])])]),t("div",J,[(d(!0),o(y,null,f(l(s).items,(r,p)=>(d(),o("div",{key:p,class:"p-4 bg-gray-50 dark:bg-slate-800 rounded-lg"},[t("div",K,[t("div",W,[e[17]||(e[17]=t("label",{class:"label text-xs"},"Product *",-1)),u(t("select",{"onUpdate:modelValue":a=>r.product_id=a,class:"input-field text-sm",required:"",onChange:a=>C(p)},[e[16]||(e[16]=t("option",{value:""},"Select Product",-1)),(d(!0),o(y,null,f(x.products,a=>(d(),o("option",{key:a.id,value:a.id},i(a.name)+" ("+i(a.sku)+") ",9,Y))),128))],40,X),[[v,r.product_id]])]),t("div",Z,[e[18]||(e[18]=t("label",{class:"label text-xs"},"Quantity *",-1)),u(t("input",{"onUpdate:modelValue":a=>r.quantity=a,type:"number",step:"0.01",min:"0.01",class:"input-field text-sm",required:"",onInput:a=>g(p)},null,40,tt),[[b,r.quantity]])]),t("div",et,[e[19]||(e[19]=t("label",{class:"label text-xs"},"Unit Price *",-1)),u(t("input",{"onUpdate:modelValue":a=>r.unit_price=a,type:"number",step:"0.01",min:"0",class:"input-field text-sm",required:"",onInput:a=>g(p)},null,40,st),[[b,r.unit_price]])]),t("div",rt,[e[20]||(e[20]=t("label",{class:"label text-xs"},"Total",-1)),t("input",{value:"$"+(r.quantity*r.unit_price).toFixed(2),type:"text",class:"input-field text-sm bg-gray-100 dark:bg-slate-700 font-semibold",readonly:""},null,8,lt)]),t("div",dt,[t("button",{type:"button",onClick:a=>V(p),class:"w-full h-[42px] flex items-center justify-center rounded-lg text-red-600 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 transition-colors"},[...e[21]||(e[21]=[t("i",{class:"fas fa-trash"},null,-1)])],8,at)])])]))),128)),l(s).items.length===0?(d(),o("div",ot,[...e[22]||(e[22]=[t("i",{class:"fas fa-box-open text-4xl mb-3 opacity-50"},null,-1),t("p",null,'No products added. Click "Add Product" to start.',-1)])])):m("",!0)]),l(s).items.length>0?(d(),o("div",it,[t("div",nt,[t("div",ut,[t("div",pt,[e[23]||(e[23]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Subtotal:",-1)),t("span",ct,"$"+i(k().toFixed(2)),1)]),t("div",mt,[e[24]||(e[24]=t("span",{class:"text-gray-900 dark:text-white"},"Total:",-1)),t("span",bt,"$"+i(S().toFixed(2)),1)])])])])):m("",!0)]),t("div",xt,[I(l($),{href:n.route("admin.purchase-orders.index"),class:"btn-secondary"},{default:h(()=>[...e[25]||(e[25]=[t("i",{class:"fas fa-times mr-2"},null,-1),c("Cancel ",-1)])]),_:1},8,["href"]),t("button",{type:"submit",class:"btn-primary",disabled:l(s).processing||l(s).items.length===0},[e[26]||(e[26]=t("i",{class:"fas fa-save mr-2"},null,-1)),c(i(l(s).processing?"Creating...":"Create Purchase Order"),1)],8,yt)])],32)])]),_:1}))}};export{kt as default};
