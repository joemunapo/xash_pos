import{s as V,m as j,c as D,w as S,a as t,i as P,u as d,l as E,t as a,n as g,d as i,o as r,g as m,p as C,b as c,v as y,h as f,F as k,e as v,f as T,j as h}from"./app-hHih9BgC.js";import{_ as F}from"./SuperAdminLayout-DALg73R5.js";import{c as w}from"./useFlashMessages-Br0efLxG.js";import"./NavLink-faodrpPr.js";const I={class:"space-y-6"},M={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Y={class:"flex items-center gap-4"},z={class:"flex items-center gap-3"},L={class:"text-2xl font-bold text-gray-900 dark:text-white"},O={class:"text-gray-600 dark:text-gray-400 mt-1"},q={class:"flex gap-2"},G={class:"grid grid-cols-2 sm:grid-cols-5 gap-3"},H={class:"card text-center"},J={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},K={class:"card text-center"},Q={class:"text-2xl font-bold text-brand-600 dark:text-brand-400"},R={class:"card text-center"},W={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},X={class:"card text-center"},Z={class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},tt={class:"card text-center"},et={class:"text-2xl font-bold text-gray-600 dark:text-gray-400"},st={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},at={class:"card"},nt={class:"flex items-center justify-between mb-4"},rt=["disabled"],it={key:0,class:"fas fa-spinner fa-spin mr-1"},dt={key:1,class:"space-y-3"},lt={class:"flex justify-between py-2 border-b border-gray-100 dark:border-slate-800"},ot={class:"text-sm font-medium text-gray-900 dark:text-white"},ut={key:0,class:"flex justify-between py-2 border-b border-gray-100 dark:border-slate-800"},xt={class:"text-sm font-medium text-gray-900 dark:text-white"},ct={class:"flex justify-between py-2 border-b border-gray-100 dark:border-slate-800"},bt={class:"text-sm font-medium text-gray-900 dark:text-white"},mt={class:"flex justify-between py-2 border-b border-gray-100 dark:border-slate-800"},gt={class:"text-sm font-medium text-gray-900 dark:text-white"},yt={class:"flex justify-between py-2 border-b border-gray-100 dark:border-slate-800"},pt={class:"text-sm font-medium text-gray-900 dark:text-white"},ft={class:"flex justify-between py-2"},kt={class:"text-sm font-medium text-gray-900 dark:text-white"},vt={class:"card"},ht={key:0,class:"space-y-3"},wt={class:"flex justify-between py-2 border-b border-gray-100 dark:border-slate-800"},_t={class:"text-sm font-medium text-gray-900 dark:text-white"},jt={class:"flex justify-between py-2 border-b border-gray-100 dark:border-slate-800"},St={class:"text-sm font-medium text-gray-900 dark:text-white"},Ct={class:"flex justify-between py-2 border-b border-gray-100 dark:border-slate-800"},Tt={class:"text-sm font-medium text-gray-900 dark:text-white"},At={class:"flex justify-between py-2 border-b border-gray-100 dark:border-slate-800"},$t={class:"text-sm font-medium text-gray-900 dark:text-white"},Bt={class:"flex justify-between py-2"},Nt={key:1,class:"space-y-4"},Ut={class:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-100 dark:border-amber-800/30"},Vt={class:"text-sm text-amber-700 dark:text-amber-300"},Dt={key:0},Pt={key:1},Et=["value"],Ft=["disabled"],It={key:0,class:"fas fa-spinner fa-spin mr-1"},Mt={class:"card"},Yt={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},zt={key:0,class:"space-y-2"},Lt={class:"flex items-center gap-3"},Ot={class:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center text-white text-xs font-bold"},qt={class:"text-sm font-medium text-gray-900 dark:text-white"},Gt={class:"text-xs text-gray-500 dark:text-gray-400"},Ht={class:"flex items-center gap-2"},Jt={class:"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 rounded-full capitalize"},Kt={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Qt={class:"card"},Rt={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Wt={key:0,class:"space-y-2"},Xt={class:"flex items-center gap-3"},Zt={class:"text-sm font-medium text-gray-900 dark:text-white"},te={class:"text-xs text-gray-500 dark:text-gray-400"},ee={key:1,class:"text-center py-8 text-gray-500 dark:text-gray-400"},ie={__name:"Show",props:{tenant:Object,plans:Array},setup(s){const l=s,b=V(!1),o=j({name:l.tenant.name,email:l.tenant.email,phone:l.tenant.phone||"",address:l.tenant.address||""}),u=j({subscription_plan_id:"",billing_cycle:"monthly"}),A=()=>{o.put(route("superadmin.tenants.update",l.tenant.id),{preserveScroll:!0,onSuccess:()=>{b.value=!1}})},$=()=>{u.post(route("superadmin.tenants.assign-subscription",l.tenant.id),{preserveScroll:!0,onSuccess:()=>{u.reset()}})},B=async()=>{(await w({title:"Suspend Tenant?",text:`Are you sure you want to suspend "${l.tenant.name}"?`,icon:"warning",confirmButtonText:"Yes, suspend"})).isConfirmed&&h.post(route("superadmin.tenants.suspend",l.tenant.id))},N=async()=>{(await w({title:"Activate Tenant?",text:`Activate "${l.tenant.name}"?`,icon:"question",confirmButtonText:"Yes, activate"})).isConfirmed&&h.post(route("superadmin.tenants.activate",l.tenant.id))},U=async()=>{(await w({title:"Delete Tenant?",text:`This will permanently delete "${l.tenant.name}" and all associated data. This cannot be undone.`,icon:"warning",confirmButtonText:"Yes, delete permanently"})).isConfirmed&&h.delete(route("superadmin.tenants.destroy",l.tenant.id))},p=x=>x?new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—",_=x=>{const e="px-2 py-1 text-xs font-medium rounded-full capitalize";switch(x){case"active":return`${e} bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400`;case"trial":return`${e} bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400`;case"suspended":return`${e} bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400`;case"cancelled":return`${e} bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400`;default:return`${e} bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400`}};return(x,e)=>(r(),D(F,{"page-title":"Tenant Details"},{default:S(()=>[t("div",I,[t("div",M,[t("div",Y,[P(d(E),{href:x.route("superadmin.tenants.index"),class:"p-2 rounded-lg text-gray-500 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors"},{default:S(()=>[...e[7]||(e[7]=[t("i",{class:"fas fa-arrow-left"},null,-1)])]),_:1},8,["href"]),t("div",null,[t("div",z,[t("h1",L,a(s.tenant.name),1),t("span",{class:g(_(s.tenant.subscription_status))},a(s.tenant.subscription_status),3)]),t("p",O,a(s.tenant.email),1)])]),t("div",q,[s.tenant.subscription_status!=="suspended"?(r(),i("button",{key:0,onClick:B,class:"px-3 py-2 text-sm font-medium bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"},[...e[8]||(e[8]=[t("i",{class:"fas fa-ban mr-1"},null,-1),m("Suspend ",-1)])])):(r(),i("button",{key:1,onClick:N,class:"px-3 py-2 text-sm font-medium bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors"},[...e[9]||(e[9]=[t("i",{class:"fas fa-check mr-1"},null,-1),m("Activate ",-1)])])),t("button",{onClick:U,class:"px-3 py-2 text-sm font-medium bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},[...e[10]||(e[10]=[t("i",{class:"fas fa-trash mr-1"},null,-1),m("Delete ",-1)])])])]),t("div",G,[t("div",H,[t("p",J,a(s.tenant.users_count),1),e[11]||(e[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Users",-1))]),t("div",K,[t("p",Q,a(s.tenant.branches_count),1),e[12]||(e[12]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Branches",-1))]),t("div",R,[t("p",W,a(s.tenant.products_count),1),e[13]||(e[13]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Products",-1))]),t("div",X,[t("p",Z,a(s.tenant.customers_count),1),e[14]||(e[14]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Customers",-1))]),t("div",tt,[t("p",et,a(s.tenant.suppliers_count),1),e[15]||(e[15]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Suppliers",-1))])]),t("div",st,[t("div",at,[t("div",nt,[e[16]||(e[16]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Business Information",-1)),t("button",{onClick:e[0]||(e[0]=n=>b.value=!b.value),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline"},a(b.value?"Cancel":"Edit"),1)]),b.value?(r(),i("form",{key:0,onSubmit:C(A,["prevent"]),class:"space-y-3"},[t("div",null,[e[17]||(e[17]=t("label",{class:"label"},"Name",-1)),c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>d(o).name=n),type:"text",class:"input-field"},null,512),[[y,d(o).name]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"label"},"Email",-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>d(o).email=n),type:"email",class:"input-field"},null,512),[[y,d(o).email]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"label"},"Phone",-1)),c(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>d(o).phone=n),type:"text",class:"input-field"},null,512),[[y,d(o).phone]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"label"},"Address",-1)),c(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=n=>d(o).address=n),rows:"2",class:"input-field"},null,512),[[y,d(o).address]])]),t("button",{type:"submit",disabled:d(o).processing,class:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"},[d(o).processing?(r(),i("i",it)):f("",!0),e[21]||(e[21]=m("Save Changes ",-1))],8,rt)],32)):(r(),i("div",dt,[t("div",lt,[e[22]||(e[22]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Name",-1)),t("span",ot,a(s.tenant.name),1)]),s.tenant.trading_name?(r(),i("div",ut,[e[23]||(e[23]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Trading Name",-1)),t("span",xt,a(s.tenant.trading_name),1)])):f("",!0),t("div",ct,[e[24]||(e[24]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Email",-1)),t("span",bt,a(s.tenant.email),1)]),t("div",mt,[e[25]||(e[25]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Phone",-1)),t("span",gt,a(s.tenant.phone||"—"),1)]),t("div",yt,[e[26]||(e[26]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Currency",-1)),t("span",pt,a(s.tenant.default_currency),1)]),t("div",ft,[e[27]||(e[27]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Created",-1)),t("span",kt,a(p(s.tenant.created_at)),1)])]))]),t("div",vt,[e[38]||(e[38]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Subscription",-1)),s.tenant.active_subscription?(r(),i("div",ht,[t("div",wt,[e[28]||(e[28]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Plan",-1)),t("span",_t,a(s.tenant.active_subscription.plan_name),1)]),t("div",jt,[e[29]||(e[29]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Price",-1)),t("span",St,"$"+a(s.tenant.active_subscription.price)+"/"+a(s.tenant.active_subscription.billing_cycle),1)]),t("div",Ct,[e[30]||(e[30]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Limits",-1)),t("span",Tt,a(s.tenant.active_subscription.max_users)+" users, "+a(s.tenant.active_subscription.max_branches)+" branches",1)]),t("div",At,[e[31]||(e[31]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Ends",-1)),t("span",$t,a(p(s.tenant.active_subscription.ends_at)),1)]),t("div",Bt,[e[32]||(e[32]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Status",-1)),t("span",{class:g(_(s.tenant.active_subscription.status))},a(s.tenant.active_subscription.status),3)])])):(r(),i("div",Nt,[t("div",Ut,[t("p",Vt,[e[33]||(e[33]=t("i",{class:"fas fa-info-circle mr-1"},null,-1)),s.tenant.subscription_status==="trial"?(r(),i("span",Dt,"On free trial until "+a(p(s.tenant.trial_ends_at)),1)):(r(),i("span",Pt,"No active subscription"))])]),e[37]||(e[37]=t("h3",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},"Assign a Plan",-1)),t("form",{onSubmit:C($,["prevent"]),class:"space-y-3"},[c(t("select",{"onUpdate:modelValue":e[5]||(e[5]=n=>d(u).subscription_plan_id=n),class:"input-field"},[e[34]||(e[34]=t("option",{value:""},"Select a plan...",-1)),(r(!0),i(k,null,v(s.plans,n=>(r(),i("option",{key:n.id,value:n.id},a(n.name)+" - $"+a(n.price_monthly)+"/mo ",9,Et))),128))],512),[[T,d(u).subscription_plan_id]]),c(t("select",{"onUpdate:modelValue":e[6]||(e[6]=n=>d(u).billing_cycle=n),class:"input-field"},[...e[35]||(e[35]=[t("option",{value:"monthly"},"Monthly",-1),t("option",{value:"yearly"},"Yearly",-1)])],512),[[T,d(u).billing_cycle]]),t("button",{type:"submit",disabled:!d(u).subscription_plan_id||d(u).processing,class:"w-full px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"},[d(u).processing?(r(),i("i",It)):f("",!0),e[36]||(e[36]=m("Assign Plan ",-1))],8,Ft)],32)]))])]),t("div",Mt,[t("h2",Yt,"Users ("+a(s.tenant.users.length)+")",1),s.tenant.users.length>0?(r(),i("div",zt,[(r(!0),i(k,null,v(s.tenant.users,n=>(r(),i("div",{key:n.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-slate-800 rounded-lg"},[t("div",Lt,[t("div",Ot,a(n.name.charAt(0).toUpperCase()),1),t("div",null,[t("p",qt,a(n.name),1),t("p",Gt,a(n.email),1)])]),t("div",Ht,[t("span",Jt,a(n.role),1),t("span",{class:g(["px-2 py-0.5 text-xs font-medium rounded-full",n.is_active?"bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"])},a(n.is_active?"Active":"Inactive"),3)])]))),128))])):(r(),i("div",Kt,[...e[39]||(e[39]=[t("p",null,"No users",-1)])]))]),t("div",Qt,[t("h2",Rt,"Branches ("+a(s.tenant.branches.length)+")",1),s.tenant.branches.length>0?(r(),i("div",Wt,[(r(!0),i(k,null,v(s.tenant.branches,n=>(r(),i("div",{key:n.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-slate-800 rounded-lg"},[t("div",Xt,[e[40]||(e[40]=t("div",{class:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},[t("i",{class:"fas fa-store text-blue-600 dark:text-blue-400 text-xs"})],-1)),t("div",null,[t("p",Zt,a(n.name),1),t("p",te,a(n.city||n.address||"—"),1)])]),t("span",{class:g(["px-2 py-0.5 text-xs font-medium rounded-full",n.is_active?"bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"])},a(n.is_active?"Active":"Inactive"),3)]))),128))])):(r(),i("div",ee,[...e[41]||(e[41]=[t("p",null,"No branches",-1)])]))])])]),_:1}))}};export{ie as default};
