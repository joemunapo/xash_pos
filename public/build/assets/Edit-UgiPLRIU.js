import{m as V,E as N,c as B,w as _,a as e,p as A,g as m,b as d,d as o,h as n,u as r,v as b,o as l,t as i,q as h,F as y,e as x,f as k,i as C,l as E,n as S}from"./app-hHih9BgC.js";import{_ as q}from"./AdminLayout-B4rk0_5R.js";import"./NavLink-faodrpPr.js";import"./useFlashMessages-Br0efLxG.js";const F={class:"space-y-6"},M={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},P={class:"space-y-6"},L={class:"card p-6"},j={class:"space-y-4"},D={key:0,class:"text-red-500 text-sm mt-1"},I={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},R={key:0,class:"text-red-500 text-sm mt-1"},T={key:0,class:"text-red-500 text-sm mt-1"},z={class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg"},O={class:"card p-6"},$={class:"space-y-4"},G={key:0,class:"text-red-500 text-sm mt-1"},H={key:0,class:"text-red-500 text-sm mt-1"},J={class:"space-y-6"},K={class:"card p-6"},Q=["value"],W={key:0,class:"text-red-500 text-sm mt-1"},X={class:"card p-6"},Y={class:"space-y-4"},Z={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-2"},ee=["value"],se={class:"text-sm text-gray-700 dark:text-gray-300"},te={key:0,class:"text-red-500 text-sm mt-1"},re={key:0},ae=["value"],le={key:0,class:"text-red-500 text-sm mt-1"},oe={class:"card p-6"},ie={class:"flex items-center justify-end gap-3"},de=["disabled"],be={__name:"Edit",props:{user:Object,branches:Array,userBranchIds:Array,roles:Array},setup(c){var f,v;const u=c,t=V({name:u.user.name,email:u.user.email,phone_number:u.user.phone_number||"",password:"",pin:"",role:u.user.role,is_active:u.user.is_active,branches:u.userBranchIds||[],primary_branch_id:((v=(f=u.user.branches)==null?void 0:f.find(p=>{var s;return(s=p.pivot)==null?void 0:s.is_primary}))==null?void 0:v.id)||null});N(()=>t.branches,p=>{p.length>0&&!p.includes(t.primary_branch_id)&&(t.primary_branch_id=p[0])});const w=()=>{t.put(route("admin.users.update",u.user.id))};return(p,s)=>(l(),B(q,{"page-title":"Edit User"},{default:_(()=>[e("div",F,[s[23]||(s[23]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Edit User"),e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Update user details and permissions")],-1)),e("form",{onSubmit:A(w,["prevent"])},[e("div",M,[e("div",P,[e("div",L,[s[13]||(s[13]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-slate-700"},[e("i",{class:"fas fa-user mr-2 text-brand-500"}),m("Account Information ")],-1)),e("div",j,[e("div",null,[s[9]||(s[9]=e("label",{class:"label"},"Full Name *",-1)),d(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>r(t).name=a),type:"text",class:"input-field",required:""},null,512),[[b,r(t).name]]),r(t).errors.name?(l(),o("p",D,i(r(t).errors.name),1)):n("",!0)]),e("div",I,[e("div",null,[s[10]||(s[10]=e("label",{class:"label"},"Email *",-1)),d(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>r(t).email=a),type:"email",class:"input-field",required:""},null,512),[[b,r(t).email]]),r(t).errors.email?(l(),o("p",R,i(r(t).errors.email),1)):n("",!0)]),e("div",null,[s[11]||(s[11]=e("label",{class:"label"},"Phone",-1)),d(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>r(t).phone_number=a),type:"text",class:"input-field"},null,512),[[b,r(t).phone_number]]),r(t).errors.phone_number?(l(),o("p",T,i(r(t).errors.phone_number),1)):n("",!0)])]),e("div",z,[d(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=a=>r(t).is_active=a),id:"is_active",class:"w-5 h-5 text-brand-600 rounded border-gray-300 focus:ring-brand-500"},null,512),[[h,r(t).is_active]]),s[12]||(s[12]=e("label",{for:"is_active",class:"text-sm font-medium text-gray-900 dark:text-white cursor-pointer"},"User is active",-1))])])]),e("div",O,[s[16]||(s[16]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-slate-700"},[e("i",{class:"fas fa-lock mr-2 text-brand-500"}),m("Security ")],-1)),e("div",$,[e("div",null,[s[14]||(s[14]=e("label",{class:"label"},"New Password",-1)),d(e("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>r(t).password=a),type:"password",class:"input-field",placeholder:"Leave blank to keep current"},null,512),[[b,r(t).password]]),r(t).errors.password?(l(),o("p",G,i(r(t).errors.password),1)):n("",!0)]),e("div",null,[s[15]||(s[15]=e("label",{class:"label"},"New PIN",-1)),d(e("input",{"onUpdate:modelValue":s[5]||(s[5]=a=>r(t).pin=a),type:"text",maxlength:"6",class:"input-field",placeholder:"Leave blank to keep current"},null,512),[[b,r(t).pin]]),r(t).errors.pin?(l(),o("p",H,i(r(t).errors.pin),1)):n("",!0)])])])]),e("div",J,[e("div",K,[s[18]||(s[18]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-slate-700"},[e("i",{class:"fas fa-user-tag mr-2 text-brand-500"}),m("Role ")],-1)),e("div",null,[s[17]||(s[17]=e("label",{class:"label"},"User Role *",-1)),d(e("select",{"onUpdate:modelValue":s[6]||(s[6]=a=>r(t).role=a),class:"input-field",required:""},[(l(!0),o(y,null,x(c.roles,a=>(l(),o("option",{key:a.value,value:a.value},i(a.label),9,Q))),128))],512),[[k,r(t).role]]),r(t).errors.role?(l(),o("p",W,i(r(t).errors.role),1)):n("",!0)])]),e("div",X,[s[21]||(s[21]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-slate-700"},[e("i",{class:"fas fa-store mr-2 text-brand-500"}),m("Branch Assignment ")],-1)),e("div",Y,[e("div",null,[s[19]||(s[19]=e("label",{class:"label"},"Assign to Branches",-1)),e("div",Z,[(l(!0),o(y,null,x(c.branches,a=>(l(),o("label",{key:a.id,class:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors"},[d(e("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":s[7]||(s[7]=g=>r(t).branches=g),class:"w-4 h-4 text-brand-600 rounded border-gray-300 focus:ring-brand-500"},null,8,ee),[[h,r(t).branches]]),e("span",se,i(a.name),1)]))),128))]),r(t).errors.branches?(l(),o("p",te,i(r(t).errors.branches),1)):n("",!0)]),r(t).branches.length>0?(l(),o("div",re,[s[20]||(s[20]=e("label",{class:"label"},"Primary Branch",-1)),d(e("select",{"onUpdate:modelValue":s[8]||(s[8]=a=>r(t).primary_branch_id=a),class:"input-field"},[(l(!0),o(y,null,x(r(t).branches,a=>{var g;return l(),o("option",{key:a,value:a},i((g=c.branches.find(U=>U.id===a))==null?void 0:g.name),9,ae)}),128))],512),[[k,r(t).primary_branch_id]]),r(t).errors.primary_branch_id?(l(),o("p",le,i(r(t).errors.primary_branch_id),1)):n("",!0)])):n("",!0)])]),e("div",oe,[e("div",ie,[C(r(E),{href:p.route("admin.users.index"),class:"btn-secondary"},{default:_(()=>[...s[22]||(s[22]=[e("i",{class:"fas fa-times mr-2"},null,-1),m("Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:r(t).processing,class:"btn-primary"},[e("i",{class:S([r(t).processing?"fas fa-spinner fa-spin":"fas fa-save","mr-2"])},null,2),m(" "+i(r(t).processing?"Saving...":"Save Changes"),1)],8,de)])])])])],32)])]),_:1}))}};export{be as default};
