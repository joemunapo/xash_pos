import{s as v,m as O,k as Z,c as P,w as tt,a as t,d as r,h as m,b as c,g as x,n as h,v as C,o as l,F as b,e as p,t as n,f as V,u as o,l as et,L as q,p as K,q as D,j as F}from"./app-DHqUTiQs.js";import{_ as st}from"./AdminLayout-BtulkRvh.js";import"./NavLink-De0s0I7C.js";import"./useFlashMessages-BBgF2e5c.js";const at={class:"space-y-6"},lt={class:"border-b border-gray-200 dark:border-slate-700"},rt={class:"flex gap-4"},ot={class:"card p-4 mb-4"},nt={class:"flex flex-col sm:flex-row gap-4"},it={class:"flex-1"},dt={class:"relative"},ut=["value"],ct={class:"card overflow-hidden"},xt={class:"overflow-x-auto"},mt={class:"w-full"},gt={class:"py-3 px-4"},vt={class:"font-medium text-gray-900 dark:text-white"},bt={key:0,class:"ml-2 px-1.5 py-0.5 text-xs bg-success-100 text-success-700 dark:bg-success-900/30 dark:text-success-400 rounded"},pt={class:"py-3 px-4"},yt={class:"px-2 py-1 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded text-sm"},ft={class:"py-3 px-4 text-gray-600 dark:text-gray-400"},kt={class:"py-3 px-4 text-center"},_t={class:"py-3 px-4 text-center text-gray-600 dark:text-gray-400"},wt={class:"py-3 px-4 text-center"},ht={class:"py-3 px-4"},Ct={class:"flex items-center justify-end gap-2"},Ut=["onClick"],St=["onClick"],At={key:0,class:"text-center py-12"},Vt={key:1,class:"flex items-center justify-between px-4 py-3 border-t border-gray-200 dark:border-slate-700"},Mt={class:"text-sm text-gray-600 dark:text-gray-400"},jt={class:"flex gap-2"},Tt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},$t={class:"card p-6"},Dt={class:"grid grid-cols-3 gap-3 items-end"},Ft=["value"],Bt=["value"],Et={key:0,class:"text-sm text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-slate-800 p-3 rounded-lg"},Nt=["disabled"],It={key:0},Lt={key:1},zt={class:"card p-6"},Ht={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Ot={key:1,class:"space-y-3 max-h-80 overflow-y-auto"},Pt={class:"flex items-center gap-2 text-sm"},qt={class:"font-medium text-gray-900 dark:text-white"},Kt={class:"font-medium text-brand-600 dark:text-brand-400"},Qt=["onClick"],Rt={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Wt={class:"relative bg-white dark:bg-slate-900 rounded-lg p-6 max-w-md w-full mx-4 shadow-2xl"},Gt={class:"flex items-center justify-between mb-4"},Jt={class:"text-lg font-semibold text-gray-900 dark:text-white"},Xt={class:"grid grid-cols-2 gap-4"},Yt={class:"col-span-2"},Zt={key:0,class:"text-red-500 text-sm mt-1"},te={key:0,class:"text-red-500 text-sm mt-1"},ee={id:"categories-list"},se=["value"],ae={class:"grid grid-cols-2 gap-4"},le={class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg cursor-pointer"},re={class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg cursor-pointer"},oe={key:0},ne={class:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg cursor-pointer"},ie={class:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-slate-700"},de=["disabled"],ue={key:0},ce={key:1},xe={key:1,class:"fixed inset-0 z-50 flex items-center justify-center"},me={class:"relative bg-white dark:bg-slate-900 rounded-lg p-6 max-w-md w-full mx-4 shadow-2xl"},ge={class:"text-gray-600 dark:text-gray-400 mb-6"},ve={class:"flex justify-end gap-3"},_e={__name:"Index",props:{units:Object,conversions:Array,categories:Array,filters:Object},setup(u){var I,L,z;const k=u,y=v("units"),U=v(!1),_=v(!1),g=v(null),S=v(null),M=v(((I=k.filters)==null?void 0:I.search)||""),j=v(((L=k.filters)==null?void 0:L.category)||""),T=v(((z=k.filters)==null?void 0:z.status)||""),a=O({name:"",abbreviation:"",category:"",is_base_unit:!1,allow_decimal:!0,is_active:!0,sort_order:0}),i=O({from_unit_id:"",to_unit_id:"",conversion_factor:""});let B=null;const Q=()=>{clearTimeout(B),B=setTimeout(()=>$(),300)},$=()=>{F.get(route("admin.units.index"),{search:M.value||void 0,category:j.value||void 0,status:T.value||void 0},{preserveState:!0,preserveScroll:!0})},E=()=>{g.value=null,a.reset(),a.clearErrors(),U.value=!0},R=d=>{g.value=d,a.name=d.name,a.abbreviation=d.abbreviation,a.category=d.category||"",a.is_base_unit=d.is_base_unit,a.allow_decimal=d.allow_decimal,a.is_active=d.is_active,a.sort_order=d.sort_order||0,a.clearErrors(),U.value=!0},w=()=>{U.value=!1,g.value=null,a.reset()},W=()=>{g.value?a.put(route("admin.units.update",g.value.id),{preserveScroll:!0,onSuccess:()=>w()}):a.post(route("admin.units.store"),{preserveScroll:!0,onSuccess:()=>w()})},G=d=>{S.value=d,_.value=!0},J=()=>{F.delete(route("admin.units.destroy",S.value.id),{preserveScroll:!0,onSuccess:()=>{_.value=!1,S.value=null}})},N=Z(()=>{if(!i.from_unit_id||!i.to_unit_id||!i.conversion_factor)return null;const d=k.units.data.find(f=>f.id==i.from_unit_id),e=k.units.data.find(f=>f.id==i.to_unit_id);return d&&e?`1 ${d.name} = ${i.conversion_factor} ${e.name}`:null}),X=()=>{i.post(route("admin.units.conversions.store"),{preserveScroll:!0,onSuccess:()=>{i.reset()}})},Y=d=>{confirm("Remove this conversion?")&&F.delete(route("admin.units.conversions.destroy",d.id),{preserveScroll:!0})};return(d,e)=>(l(),P(st,{"page-title":"Units of Measure"},{default:tt(()=>{var f;return[t("div",at,[t("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},[e[17]||(e[17]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Units of Measure"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Manage units and conversions for your products")],-1)),t("button",{onClick:E,class:"btn-primary"},[...e[16]||(e[16]=[t("i",{class:"fas fa-plus mr-2"},null,-1),x(" Add Unit ",-1)])])]),t("div",lt,[t("nav",rt,[t("button",{onClick:e[0]||(e[0]=s=>y.value="units"),class:h(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",y.value==="units"?"border-brand-500 text-brand-600 dark:text-brand-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"])},[...e[18]||(e[18]=[t("i",{class:"fas fa-ruler mr-2"},null,-1),x("Units ",-1)])],2),t("button",{onClick:e[1]||(e[1]=s=>y.value="conversions"),class:h(["px-4 py-2 text-sm font-medium border-b-2 transition-colors",y.value==="conversions"?"border-brand-500 text-brand-600 dark:text-brand-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"])},[...e[19]||(e[19]=[t("i",{class:"fas fa-exchange-alt mr-2"},null,-1),x("Conversions ",-1)])],2)])]),c(t("div",null,[t("div",ot,[t("div",nt,[t("div",it,[t("div",dt,[e[20]||(e[20]=t("i",{class:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>M.value=s),type:"text",placeholder:"Search units...",class:"input-field pl-10",onInput:Q},null,544),[[C,M.value]])])]),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>j.value=s),onChange:$,class:"input-field sm:w-40"},[e[21]||(e[21]=t("option",{value:""},"All Categories",-1)),(l(!0),r(b,null,p(u.categories,s=>(l(),r("option",{key:s,value:s},n(s),9,ut))),128))],544),[[V,j.value]]),c(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>T.value=s),onChange:$,class:"input-field sm:w-40"},[...e[22]||(e[22]=[t("option",{value:""},"All Status",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1)])],544),[[V,T.value]])])]),t("div",ct,[t("div",xt,[t("table",mt,[e[25]||(e[25]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-slate-700"},[t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-600 dark:text-gray-400"},"Unit"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-600 dark:text-gray-400"},"Abbreviation"),t("th",{class:"text-left py-3 px-4 text-sm font-medium text-gray-600 dark:text-gray-400"},"Category"),t("th",{class:"text-center py-3 px-4 text-sm font-medium text-gray-600 dark:text-gray-400"},"Decimals"),t("th",{class:"text-center py-3 px-4 text-sm font-medium text-gray-600 dark:text-gray-400"},"Conversions"),t("th",{class:"text-center py-3 px-4 text-sm font-medium text-gray-600 dark:text-gray-400"},"Status"),t("th",{class:"text-right py-3 px-4 text-sm font-medium text-gray-600 dark:text-gray-400"},"Actions")])],-1)),t("tbody",null,[(l(!0),r(b,null,p(u.units.data,s=>(l(),r("tr",{key:s.id,class:"border-b border-gray-100 dark:border-slate-800 hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors"},[t("td",gt,[t("span",vt,n(s.name),1),s.is_base_unit?(l(),r("span",bt,"Base")):m("",!0)]),t("td",pt,[t("code",yt,n(s.abbreviation),1)]),t("td",ft,n(s.category||"-"),1),t("td",kt,[t("i",{class:h(s.allow_decimal?"fas fa-check text-brand-500":"fas fa-times text-gray-400")},null,2)]),t("td",_t,n(s.conversions_from_count||0),1),t("td",wt,[t("span",{class:h(["px-2 py-1 text-xs font-medium rounded-full",s.is_active?"bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"])},n(s.is_active?"Active":"Inactive"),3)]),t("td",ht,[t("div",Ct,[t("button",{onClick:A=>R(s),class:"px-3 py-1.5 text-xs font-medium bg-success-600 text-white rounded hover:bg-success-700 transition-colors"},[...e[23]||(e[23]=[t("i",{class:"fas fa-edit mr-1"},null,-1),x("Edit ",-1)])],8,Ut),t("button",{onClick:A=>G(s),class:"px-3 py-1.5 text-xs font-medium bg-red-600 text-white rounded hover:bg-red-700 transition-colors"},[...e[24]||(e[24]=[t("i",{class:"fas fa-trash mr-1"},null,-1),x("Delete ",-1)])],8,St)])])]))),128))])])]),u.units.data.length===0?(l(),r("div",At,[e[27]||(e[27]=t("i",{class:"fas fa-ruler text-5xl text-gray-300 dark:text-gray-600 mb-4"},null,-1)),e[28]||(e[28]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"No units found",-1)),e[29]||(e[29]=t("p",{class:"text-gray-500 dark:text-gray-400 mb-4"},"Create your first unit of measure to get started.",-1)),t("button",{onClick:E,class:"btn-primary"},[...e[26]||(e[26]=[t("i",{class:"fas fa-plus mr-2"},null,-1),x(" Add Unit ",-1)])])])):m("",!0),u.units.data.length>0?(l(),r("div",Vt,[t("p",Mt," Showing "+n(u.units.from)+" to "+n(u.units.to)+" of "+n(u.units.total)+" results ",1),t("div",jt,[(l(!0),r(b,null,p(u.units.links,s=>(l(),P(o(et),{key:s.label,href:s.url||"#",class:h(["px-3 py-1 text-sm rounded-lg transition-colors",s.active?"bg-brand-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700",!s.url&&"opacity-50 cursor-not-allowed"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):m("",!0)])],512),[[q,y.value==="units"]]),c(t("div",null,[t("div",Tt,[t("div",$t,[e[38]||(e[38]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Add Conversion",-1)),t("form",{onSubmit:K(X,["prevent"]),class:"space-y-4"},[t("div",Dt,[t("div",null,[e[31]||(e[31]=t("label",{class:"label"},"From Unit",-1)),c(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>o(i).from_unit_id=s),class:"input-field"},[e[30]||(e[30]=t("option",{value:""},"Select",-1)),(l(!0),r(b,null,p(u.units.data,s=>(l(),r("option",{key:s.id,value:s.id},n(s.name)+" ("+n(s.abbreviation)+")",9,Ft))),128))],512),[[V,o(i).from_unit_id]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"label"},"Factor",-1)),c(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>o(i).conversion_factor=s),type:"number",step:"0.000001",class:"input-field",placeholder:"1.0"},null,512),[[C,o(i).conversion_factor]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"label"},"To Unit",-1)),c(t("select",{"onUpdate:modelValue":e[7]||(e[7]=s=>o(i).to_unit_id=s),class:"input-field"},[e[33]||(e[33]=t("option",{value:""},"Select",-1)),(l(!0),r(b,null,p(u.units.data,s=>(l(),r("option",{key:s.id,value:s.id},n(s.name)+" ("+n(s.abbreviation)+")",9,Bt))),128))],512),[[V,o(i).to_unit_id]])])]),N.value?(l(),r("p",Et,[e[35]||(e[35]=t("i",{class:"fas fa-info-circle mr-2"},null,-1)),x(n(N.value),1)])):m("",!0),t("button",{type:"submit",disabled:o(i).processing,class:"btn-primary w-full"},[o(i).processing?(l(),r("span",It,[...e[36]||(e[36]=[t("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),x("Adding...",-1)])])):(l(),r("span",Lt,[...e[37]||(e[37]=[t("i",{class:"fas fa-plus mr-2"},null,-1),x("Add Conversion",-1)])]))],8,Nt)],32)]),t("div",zt,[e[42]||(e[42]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Existing Conversions",-1)),u.conversions.length===0?(l(),r("div",Ht,[...e[39]||(e[39]=[t("i",{class:"fas fa-exchange-alt text-3xl mb-3 opacity-50"},null,-1),t("p",null,"No conversions defined yet",-1)])])):(l(),r("div",Ot,[(l(!0),r(b,null,p(u.conversions,s=>{var A,H;return l(),r("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-slate-800 rounded-lg"},[t("div",Pt,[t("span",qt,"1 "+n((A=s.from_unit)==null?void 0:A.abbreviation),1),e[40]||(e[40]=t("i",{class:"fas fa-arrow-right text-gray-400"},null,-1)),t("span",Kt,n(s.conversion_factor)+" "+n((H=s.to_unit)==null?void 0:H.abbreviation),1)]),t("button",{onClick:be=>Y(s),class:"p-1.5 text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors"},[...e[41]||(e[41]=[t("i",{class:"fas fa-trash text-sm"},null,-1)])],8,Qt)])}),128))]))])])],512),[[q,y.value==="conversions"]])]),U.value?(l(),r("div",Rt,[t("div",{class:"fixed inset-0 bg-black/50",onClick:w}),t("div",Wt,[t("div",Gt,[t("h3",Jt,n(g.value?"Edit Unit":"Create Unit"),1),t("button",{onClick:w,class:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...e[43]||(e[43]=[t("i",{class:"fas fa-times"},null,-1)])])]),t("form",{onSubmit:K(W,["prevent"]),class:"space-y-4"},[t("div",Xt,[t("div",Yt,[e[44]||(e[44]=t("label",{class:"label"},"Unit Name *",-1)),c(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o(a).name=s),type:"text",class:"input-field",placeholder:"e.g., Kilograms",autofocus:""},null,512),[[C,o(a).name]]),o(a).errors.name?(l(),r("p",Zt,n(o(a).errors.name),1)):m("",!0)]),t("div",null,[e[45]||(e[45]=t("label",{class:"label"},"Abbreviation *",-1)),c(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o(a).abbreviation=s),type:"text",class:"input-field",placeholder:"e.g., kg",maxlength:"10"},null,512),[[C,o(a).abbreviation]]),o(a).errors.abbreviation?(l(),r("p",te,n(o(a).errors.abbreviation),1)):m("",!0)]),t("div",null,[e[46]||(e[46]=t("label",{class:"label"},"Category",-1)),c(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o(a).category=s),type:"text",class:"input-field",placeholder:"e.g., Weight",list:"categories-list"},null,512),[[C,o(a).category]]),t("datalist",ee,[(l(!0),r(b,null,p(u.categories,s=>(l(),r("option",{key:s,value:s},null,8,se))),128))])])]),t("div",ae,[t("label",le,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=s=>o(a).allow_decimal=s),class:"w-4 h-4 text-brand-600 rounded"},null,512),[[D,o(a).allow_decimal]]),e[47]||(e[47]=t("div",null,[t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Allow Decimals"),t("p",{class:"text-xs text-gray-500"},"e.g., 1.5 kg")],-1))]),t("label",re,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=s=>o(a).is_base_unit=s),class:"w-4 h-4 text-brand-600 rounded"},null,512),[[D,o(a).is_base_unit]]),e[48]||(e[48]=t("div",null,[t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Base Unit"),t("p",{class:"text-xs text-gray-500"},"Primary in category")],-1))])]),g.value?(l(),r("div",oe,[t("label",ne,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=s=>o(a).is_active=s),class:"w-4 h-4 text-brand-600 rounded"},null,512),[[D,o(a).is_active]]),e[49]||(e[49]=t("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Active",-1))])])):m("",!0),t("div",ie,[t("button",{type:"button",onClick:w,class:"btn-secondary"},"Cancel"),t("button",{type:"submit",disabled:o(a).processing,class:"btn-primary"},[o(a).processing?(l(),r("span",ue,[...e[50]||(e[50]=[t("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),x("Saving...",-1)])])):(l(),r("span",ce,[e[51]||(e[51]=t("i",{class:"fas fa-check mr-2"},null,-1)),x(n(g.value?"Update":"Create"),1)]))],8,de)])],32)])])):m("",!0),_.value?(l(),r("div",xe,[t("div",{class:"fixed inset-0 bg-black/50",onClick:e[14]||(e[14]=s=>_.value=!1)}),t("div",me,[e[54]||(e[54]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},"Delete Unit",-1)),t("p",ge,[e[52]||(e[52]=x(" Are you sure you want to delete ",-1)),t("strong",null,n((f=S.value)==null?void 0:f.name),1),e[53]||(e[53]=x("? This will also remove all associated conversions. ",-1))]),t("div",ve,[t("button",{onClick:e[15]||(e[15]=s=>_.value=!1),class:"btn-secondary"},"Cancel"),t("button",{onClick:J,class:"btn-danger"},"Delete")])])])):m("",!0)]}),_:1}))}};export{_e as default};
