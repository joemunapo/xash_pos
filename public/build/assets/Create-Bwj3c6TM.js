import{m as w,E as U,c as V,w as x,a as s,i as f,u as r,l as v,g as y,p as C,b as n,d as o,h as i,v as u,o as a,t as d,F as g,e as c,f as k,q}from"./app-xtd10Mqh.js";import{_ as A}from"./AdminLayout-CiSsArE9.js";import"./NavLink-DvhtSBKV.js";import"./useFlashMessages-uyAZyciG.js";const B={class:"max-w-2xl"},N={class:"mb-6"},F={class:"space-y-6"},P={key:0,class:"text-red-500 text-sm mt-1"},D={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},M={key:0,class:"text-red-500 text-sm mt-1"},S={key:0,class:"text-red-500 text-sm mt-1"},E={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},j={key:0,class:"text-red-500 text-sm mt-1"},R={key:0,class:"text-red-500 text-sm mt-1"},T={key:1,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},J={class:"space-y-6"},L=["value"],O={key:0,class:"text-red-500 text-sm mt-1"},$={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3"},z=["value"],G={class:"text-sm text-gray-700 dark:text-gray-300"},H={key:0,class:"text-red-500 text-sm mt-1"},I={key:0},K=["value"],Q={key:0,class:"text-red-500 text-sm mt-1"},W={class:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200 dark:border-slate-700"},X=["disabled"],Y={key:0,class:"fas fa-spinner fa-spin mr-2"},re={__name:"Create",props:{branches:Array,roles:Array},setup(b){const t=w({name:"",email:"",phone_number:"",password:"",pin:"",role:"cashier",branches:[],primary_branch_id:null});U(()=>t.branches,m=>{m.length>0&&!m.includes(t.primary_branch_id)&&(t.primary_branch_id=m[0])});const h=()=>{t.post(route("admin.users.store"))};return(m,e)=>(a(),V(A,{"page-title":"Create User"},{default:x(()=>[s("div",B,[s("div",N,[f(r(v),{href:m.route("admin.users.index"),class:"inline-flex items-center text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-4"},{default:x(()=>[...e[8]||(e[8]=[s("i",{class:"fas fa-arrow-left mr-2"},null,-1),y(" Back to Users ",-1)])]),_:1},8,["href"]),e[9]||(e[9]=s("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create User",-1)),e[10]||(e[10]=s("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Add a new staff member",-1))]),s("form",{onSubmit:C(h,["prevent"]),class:"card p-6 space-y-8"},[s("div",F,[e[16]||(e[16]=s("div",{class:"pb-2 border-b border-gray-200 dark:border-slate-700"},[s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Account Information"),s("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Basic user details and credentials")],-1)),s("div",null,[e[11]||(e[11]=s("label",{class:"label"},"Full Name *",-1)),n(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>r(t).name=l),type:"text",class:"input-field",placeholder:"John Doe",required:""},null,512),[[u,r(t).name]]),r(t).errors.name?(a(),o("p",P,d(r(t).errors.name),1)):i("",!0)]),s("div",D,[s("div",null,[e[12]||(e[12]=s("label",{class:"label"},"Email *",-1)),n(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>r(t).email=l),type:"email",class:"input-field",placeholder:"john@example.com",required:""},null,512),[[u,r(t).email]]),r(t).errors.email?(a(),o("p",M,d(r(t).errors.email),1)):i("",!0)]),s("div",null,[e[13]||(e[13]=s("label",{class:"label"},"Phone",-1)),n(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>r(t).phone_number=l),type:"text",class:"input-field",placeholder:"+263771234567"},null,512),[[u,r(t).phone_number]]),r(t).errors.phone_number?(a(),o("p",S,d(r(t).errors.phone_number),1)):i("",!0)])]),s("div",E,[s("div",null,[e[14]||(e[14]=s("label",{class:"label"},"Password *",-1)),n(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>r(t).password=l),type:"password",class:"input-field",placeholder:"••••••••",required:""},null,512),[[u,r(t).password]]),r(t).errors.password?(a(),o("p",j,d(r(t).errors.password),1)):i("",!0)]),s("div",null,[e[15]||(e[15]=s("label",{class:"label"},"PIN (4-6 digits)",-1)),n(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>r(t).pin=l),type:"text",maxlength:"6",class:"input-field",placeholder:"1234"},null,512),[[u,r(t).pin]]),r(t).errors.pin?(a(),o("p",R,d(r(t).errors.pin),1)):(a(),o("p",T,"For POS device login"))])])]),s("div",J,[e[20]||(e[20]=s("div",{class:"pb-2 border-b border-gray-200 dark:border-slate-700"},[s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Role & Access"),s("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Define user permissions and branch assignments")],-1)),s("div",null,[e[17]||(e[17]=s("label",{class:"label"},"Role *",-1)),n(s("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>r(t).role=l),class:"input-field",required:""},[(a(!0),o(g,null,c(b.roles,l=>(a(),o("option",{key:l.value,value:l.value},d(l.label),9,L))),128))],512),[[k,r(t).role]]),r(t).errors.role?(a(),o("p",O,d(r(t).errors.role),1)):i("",!0)]),s("div",null,[e[18]||(e[18]=s("label",{class:"label"},"Assign to Branches",-1)),s("div",$,[(a(!0),o(g,null,c(b.branches,l=>(a(),o("label",{key:l.id,class:"flex items-center gap-2 p-3 bg-gray-50 dark:bg-slate-800 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors"},[n(s("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[6]||(e[6]=p=>r(t).branches=p),class:"w-4 h-4 text-brand-600 rounded border-gray-300 focus:ring-brand-500"},null,8,z),[[q,r(t).branches]]),s("span",G,d(l.name),1)]))),128))]),r(t).errors.branches?(a(),o("p",H,d(r(t).errors.branches),1)):i("",!0)]),r(t).branches.length>0?(a(),o("div",I,[e[19]||(e[19]=s("label",{class:"label"},"Primary Branch *",-1)),n(s("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>r(t).primary_branch_id=l),class:"input-field",required:""},[(a(!0),o(g,null,c(r(t).branches,l=>{var p;return a(),o("option",{key:l,value:l},d((p=b.branches.find(_=>_.id===l))==null?void 0:p.name),9,K)}),128))],512),[[k,r(t).primary_branch_id]]),r(t).errors.primary_branch_id?(a(),o("p",Q,d(r(t).errors.primary_branch_id),1)):i("",!0)])):i("",!0)]),s("div",W,[f(r(v),{href:m.route("admin.users.index"),class:"btn-secondary"},{default:x(()=>[...e[21]||(e[21]=[y("Cancel",-1)])]),_:1},8,["href"]),s("button",{type:"submit",disabled:r(t).processing,class:"btn-primary"},[r(t).processing?(a(),o("i",Y)):i("",!0),e[22]||(e[22]=y(" Create User ",-1))],8,X)])],32)])]),_:1}))}};export{re as default};
