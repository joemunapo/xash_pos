import{r as M,c as h,w as _,a as t,b as x,v as b,d as o,o as l,F as g,e as p,t as i,f as w,g as c,h as v,n as f,i as B,u as A,l as T,j as I}from"./app-xtd10Mqh.js";import{_ as H}from"./AdminLayout-CiSsArE9.js";import"./NavLink-DvhtSBKV.js";import"./useFlashMessages-uyAZyciG.js";const O={class:"space-y-6"},$={class:"card p-6"},z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},E={class:"lg:col-span-2"},P=["value"],q=["value"],G={class:"card overflow-hidden"},J={class:"overflow-x-auto"},K={class:"w-full"},Q={class:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700"},R={key:0},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"text-sm font-medium text-gray-900 dark:text-white"},Y={class:"text-xs text-gray-500 dark:text-gray-400"},Z={class:"px-6 py-4"},tt={class:"text-sm font-medium text-gray-900 dark:text-white"},et={class:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs"},st={class:"px-6 py-4"},at={class:"px-6 py-4"},rt={class:"text-sm font-medium text-gray-900 dark:text-white"},lt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},ot={class:"px-6 py-4"},it={key:0,class:"text-sm text-gray-700 dark:text-gray-300"},nt={class:"line-clamp-2"},dt={key:1,class:"text-sm text-gray-500 dark:text-gray-400 italic"},ct={class:"px-6 py-4"},ut={class:"text-sm font-mono text-gray-600 dark:text-gray-400"},xt={class:"px-6 py-4 text-center"},gt={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-slate-700"},mt={class:"flex items-center justify-between"},yt={class:"text-sm text-gray-700 dark:text-gray-300"},pt={class:"font-medium"},ft={class:"font-medium"},bt={class:"font-medium"},vt={class:"flex gap-2"},kt=["innerHTML"],Tt={__name:"Index",props:{logs:Object,filters:Object,actions:Array,users:Array},setup(n){const u=n,r=M({search:u.filters.search||"",action:u.filters.action||"",user_id:u.filters.user_id||"",date_from:u.filters.date_from||"",date_to:u.filters.date_to||""});let k=null;const C=()=>{clearTimeout(k),k=setTimeout(()=>{d()},500)},d=()=>{I.get(route("admin.activity-logs.index"),r,{preserveState:!0,preserveScroll:!0})},S=()=>{r.search="",r.action="",r.user_id="",r.date_from="",r.date_to="",d()},j=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),D=a=>new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),U=a=>a.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),V=a=>({created:"badge-success",updated:"badge-info",deleted:"badge-danger",login:"badge-primary",logout:"badge-secondary",failed_login:"badge-warning"})[a]||"badge-secondary",L=a=>({created:"fas fa-plus",updated:"fas fa-edit",deleted:"fas fa-trash",login:"fas fa-sign-in-alt",logout:"fas fa-sign-out-alt",failed_login:"fas fa-exclamation-triangle"})[a]||"fas fa-info-circle",N=a=>{if(!a)return"N/A";const e=a.split("\\");return e[e.length-1]},F=a=>{if(!a.new_values)return"";const e=Object.entries(a.new_values).slice(0,3).map(([m,y])=>`${m}: ${y}`).join(", "),s=Object.keys(a.new_values).length-3;return e+(s>0?` +${s} more`:"")};return(a,e)=>(l(),h(H,{"page-title":"Activity Logs"},{default:_(()=>[t("div",O,[e[20]||(e[20]=t("div",{class:"flex items-center justify-between"},[t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Activity Logs"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Track all system activities and changes")])],-1)),t("div",$,[t("div",z,[t("div",E,[e[5]||(e[5]=t("label",{class:"label"},"Search",-1)),x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.search=s),type:"text",class:"input-field",placeholder:"Search actions, models...",onInput:C},null,544),[[b,r.search]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"label"},"Action",-1)),x(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.action=s),class:"input-field",onChange:d},[e[6]||(e[6]=t("option",{value:""},"All Actions",-1)),(l(!0),o(g,null,p(n.actions,s=>(l(),o("option",{key:s.value,value:s.value},i(s.label),9,P))),128))],544),[[w,r.action]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"label"},"User",-1)),x(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.user_id=s),class:"input-field",onChange:d},[e[8]||(e[8]=t("option",{value:""},"All Users",-1)),(l(!0),o(g,null,p(n.users,s=>(l(),o("option",{key:s.value,value:s.value},i(s.label),9,q))),128))],544),[[w,r.user_id]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"label"},"Date From",-1)),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.date_from=s),type:"date",class:"input-field",onChange:d},null,544),[[b,r.date_from]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"label"},"Date To",-1)),x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>r.date_to=s),type:"date",class:"input-field",onChange:d},null,544),[[b,r.date_to]])]),t("div",{class:"lg:col-span-5 flex justify-end gap-2"},[t("button",{onClick:S,class:"btn-secondary"},[...e[12]||(e[12]=[t("i",{class:"fas fa-times mr-2"},null,-1),c("Clear Filters ",-1)])])])])]),t("div",G,[t("div",J,[t("table",K,[e[15]||(e[15]=t("thead",{class:"bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-40"},"Timestamp"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"User"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-32"},"Action"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-40"},"Model"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Details"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-36"},"IP Address"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-20"},"View")])],-1)),t("tbody",Q,[n.logs.data.length===0?(l(),o("tr",R,[...e[13]||(e[13]=[t("td",{colspan:"7",class:"px-6 py-12 text-center"},[t("div",{class:"flex flex-col items-center justify-center text-gray-500 dark:text-gray-400"},[t("i",{class:"fas fa-inbox text-5xl mb-3 opacity-50"}),t("p",{class:"text-lg font-medium"},"No activity logs found"),t("p",{class:"text-sm mt-1"},"Try adjusting your filters")])],-1)])])):v("",!0),(l(!0),o(g,null,p(n.logs.data,s=>{var m,y;return l(),o("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-slate-800/50 transition-colors"},[t("td",W,[t("div",X,i(j(s.created_at)),1),t("div",Y,i(D(s.created_at)),1)]),t("td",Z,[t("div",tt,i(((m=s.user)==null?void 0:m.name)||"System"),1),t("div",et,i(((y=s.user)==null?void 0:y.email)||"N/A"),1)]),t("td",st,[t("span",{class:f([V(s.action),"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium whitespace-nowrap"])},[t("i",{class:f([L(s.action),"mr-1.5"])},null,2),c(" "+i(U(s.action)),1)],2)]),t("td",at,[t("div",rt,i(N(s.model_type)),1),s.model_id?(l(),o("div",lt," ID: "+i(s.model_id),1)):v("",!0)]),t("td",ot,[s.new_values?(l(),o("div",it,[t("p",nt,i(F(s)),1)])):(l(),o("div",dt," No details "))]),t("td",ct,[t("span",ut,i(s.ip_address),1)]),t("td",xt,[B(A(T),{href:a.route("admin.activity-logs.show",s.id),class:"inline-flex items-center justify-center w-8 h-8 rounded-lg text-brand-600 hover:text-brand-700 hover:bg-brand-50 dark:text-brand-400 dark:hover:text-brand-300 dark:hover:bg-brand-900/20 transition-colors",title:"View Details"},{default:_(()=>[...e[14]||(e[14]=[t("i",{class:"fas fa-eye"},null,-1)])]),_:1},8,["href"])])])}),128))])])]),n.logs.data.length>0?(l(),o("div",gt,[t("div",mt,[t("p",yt,[e[16]||(e[16]=c(" Showing ",-1)),t("span",pt,i(n.logs.from),1),e[17]||(e[17]=c(" to ",-1)),t("span",ft,i(n.logs.to),1),e[18]||(e[18]=c(" of ",-1)),t("span",bt,i(n.logs.total),1),e[19]||(e[19]=c(" results ",-1))]),t("div",vt,[(l(!0),o(g,null,p(n.logs.links,s=>(l(),o(g,{key:s.label},[s.url?(l(),h(A(T),{key:0,href:s.url,class:f(["px-3 py-1 text-sm rounded-lg border transition-colors",s.active?"bg-brand-600 text-white border-brand-600":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600 hover:bg-gray-50 dark:hover:bg-slate-700"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(l(),o("span",{key:1,class:f(["px-3 py-1 text-sm rounded-lg border opacity-50 cursor-not-allowed","bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-slate-600"]),innerHTML:s.label},null,8,kt))],64))),128))])])])):v("",!0)])])]),_:1}))}};export{Tt as default};
