import{m as U,c as F,w as h,a as e,p as I,b as u,d as a,h as c,u as l,o as d,F as x,e as y,t as i,f as v,v as m,g,i as P,l as A}from"./app-DHqUTiQs.js";import{_ as O}from"./AdminLayout-BtulkRvh.js";import"./NavLink-De0s0I7C.js";import"./useFlashMessages-BBgF2e5c.js";const T={class:"max-w-6xl space-y-6"},$={class:"card p-6"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},N=["value"],j={key:0,class:"text-red-500 text-sm mt-1"},D=["value"],M={key:0,class:"text-red-500 text-sm mt-1"},E={key:0,class:"text-red-500 text-sm mt-1"},L={key:0,class:"text-red-500 text-sm mt-1"},Q={class:"card p-6"},z={class:"space-y-4"},G={class:"grid grid-cols-1 md:grid-cols-12 gap-4"},H={class:"md:col-span-4"},J=["onUpdate:modelValue","onChange"],K=["value"],R={class:"md:col-span-2"},W=["onUpdate:modelValue","onInput"],X={class:"md:col-span-2"},Y=["onUpdate:modelValue","onInput"],Z={class:"md:col-span-2"},tt=["value"],et={class:"md:col-span-2 flex items-end"},st=["onClick"],rt={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},lt={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-slate-700"},dt={class:"flex justify-end"},ot={class:"w-full md:w-1/3 space-y-2"},at={class:"flex justify-between text-sm"},it={class:"font-semibold text-gray-900 dark:text-white"},nt={class:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200 dark:border-slate-700"},ut={class:"text-brand-600 dark:text-brand-400"},pt={class:"card p-6"},ct={class:"flex items-center justify-end gap-3"},mt=["disabled"],vt={__name:"Create",props:{suppliers:Array,branches:Array,products:Array},setup(b){const w=b,s=U({supplier_id:"",branch_id:"",order_date:new Date().toISOString().split("T")[0],expected_delivery:"",items:[],notes:""}),_=()=>{s.items.push({product_id:"",quantity:1,unit_price:0})},V=n=>{s.items.splice(n,1)},C=n=>{const t=s.items[n],r=w.products.find(p=>p.id===t.product_id);r&&(t.unit_price=parseFloat(r.cost_price||0)),f(n)},f=n=>{const t=s.items[n];t.total=(parseFloat(t.quantity)||0)*(parseFloat(t.unit_price)||0)},k=()=>s.items.reduce((n,t)=>n+(parseFloat(t.quantity)||0)*(parseFloat(t.unit_price)||0),0),q=()=>k(),S=()=>{s.post(route("admin.purchase-orders.store"))};return s.items.length===0&&_(),(n,t)=>(d(),F(O,{"page-title":"Create Purchase Order"},{default:h(()=>[e("div",T,[t[26]||(t[26]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Create Purchase Order"),e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Order products from supplier")],-1)),e("form",{onSubmit:I(S,["prevent"]),class:"space-y-6"},[e("div",$,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-slate-700"}," Order Information ",-1)),e("div",B,[e("div",null,[t[6]||(t[6]=e("label",{class:"label"},"Supplier *",-1)),u(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>l(s).supplier_id=r),class:"input-field",required:""},[t[5]||(t[5]=e("option",{value:""},"Select Supplier",-1)),(d(!0),a(x,null,y(b.suppliers,r=>(d(),a("option",{key:r.id,value:r.id},i(r.name),9,N))),128))],512),[[v,l(s).supplier_id]]),l(s).errors.supplier_id?(d(),a("p",j,i(l(s).errors.supplier_id),1)):c("",!0)]),e("div",null,[t[8]||(t[8]=e("label",{class:"label"},"Branch *",-1)),u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>l(s).branch_id=r),class:"input-field",required:""},[t[7]||(t[7]=e("option",{value:""},"Select Branch",-1)),(d(!0),a(x,null,y(b.branches,r=>(d(),a("option",{key:r.id,value:r.id},i(r.name),9,D))),128))],512),[[v,l(s).branch_id]]),l(s).errors.branch_id?(d(),a("p",M,i(l(s).errors.branch_id),1)):c("",!0)]),e("div",null,[t[9]||(t[9]=e("label",{class:"label"},"Order Date *",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>l(s).order_date=r),type:"date",class:"input-field",required:""},null,512),[[m,l(s).order_date]]),l(s).errors.order_date?(d(),a("p",E,i(l(s).errors.order_date),1)):c("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{class:"label"},"Expected Delivery",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>l(s).expected_delivery=r),type:"date",class:"input-field"},null,512),[[m,l(s).expected_delivery]]),l(s).errors.expected_delivery?(d(),a("p",L,i(l(s).errors.expected_delivery),1)):c("",!0)])])]),e("div",Q,[e("div",{class:"flex items-center justify-between mb-4 pb-2 border-b border-gray-200 dark:border-slate-700"},[t[13]||(t[13]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Products",-1)),e("button",{type:"button",onClick:_,class:"btn-secondary text-sm"},[...t[12]||(t[12]=[e("i",{class:"fas fa-plus mr-2"},null,-1),g("Add Product ",-1)])])]),e("div",z,[(d(!0),a(x,null,y(l(s).items,(r,p)=>(d(),a("div",{key:p,class:"p-4 bg-gray-50 dark:bg-slate-800 rounded-lg"},[e("div",G,[e("div",H,[t[15]||(t[15]=e("label",{class:"label text-xs"},"Product *",-1)),u(e("select",{"onUpdate:modelValue":o=>r.product_id=o,class:"input-field text-sm",required:"",onChange:o=>C(p)},[t[14]||(t[14]=e("option",{value:""},"Select Product",-1)),(d(!0),a(x,null,y(b.products,o=>(d(),a("option",{key:o.id,value:o.id},i(o.name)+" ("+i(o.sku)+") ",9,K))),128))],40,J),[[v,r.product_id]])]),e("div",R,[t[16]||(t[16]=e("label",{class:"label text-xs"},"Quantity *",-1)),u(e("input",{"onUpdate:modelValue":o=>r.quantity=o,type:"number",step:"0.01",min:"0.01",class:"input-field text-sm",required:"",onInput:o=>f(p)},null,40,W),[[m,r.quantity]])]),e("div",X,[t[17]||(t[17]=e("label",{class:"label text-xs"},"Unit Price *",-1)),u(e("input",{"onUpdate:modelValue":o=>r.unit_price=o,type:"number",step:"0.01",min:"0",class:"input-field text-sm",required:"",onInput:o=>f(p)},null,40,Y),[[m,r.unit_price]])]),e("div",Z,[t[18]||(t[18]=e("label",{class:"label text-xs"},"Total",-1)),e("input",{value:(r.quantity*r.unit_price).toFixed(2),type:"text",class:"input-field text-sm bg-gray-100 dark:bg-slate-700",readonly:""},null,8,tt)]),e("div",et,[e("button",{type:"button",onClick:o=>V(p),class:"btn-secondary text-sm w-full text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20"},[...t[19]||(t[19]=[e("i",{class:"fas fa-trash"},null,-1)])],8,st)])])]))),128)),l(s).items.length===0?(d(),a("div",rt,[...t[20]||(t[20]=[e("i",{class:"fas fa-box-open text-4xl mb-3 opacity-50"},null,-1),e("p",null,'No products added. Click "Add Product" to start.',-1)])])):c("",!0)]),l(s).items.length>0?(d(),a("div",lt,[e("div",dt,[e("div",ot,[e("div",at,[t[21]||(t[21]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Subtotal:",-1)),e("span",it,"$"+i(k().toFixed(2)),1)]),e("div",nt,[t[22]||(t[22]=e("span",{class:"text-gray-900 dark:text-white"},"Total:",-1)),e("span",ut,"$"+i(q().toFixed(2)),1)])])])])):c("",!0)]),e("div",pt,[t[23]||(t[23]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Additional Notes",-1)),u(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=r=>l(s).notes=r),class:"input-field",rows:"3",placeholder:"Any special instructions or notes..."},null,512),[[m,l(s).notes]])]),e("div",ct,[P(l(A),{href:n.route("admin.purchase-orders.index"),class:"btn-secondary"},{default:h(()=>[...t[24]||(t[24]=[e("i",{class:"fas fa-times mr-2"},null,-1),g("Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",class:"btn-primary",disabled:l(s).processing||l(s).items.length===0},[t[25]||(t[25]=e("i",{class:"fas fa-save mr-2"},null,-1)),g(i(l(s).processing?"Creating...":"Create Purchase Order"),1)],8,mt)])],32)])]),_:1}))}};export{vt as default};
