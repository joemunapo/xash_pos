import{s as h,r as $,c as M,w as V,a as e,d as i,o as a,F as d,e as m,n as u,t as n,g as f,j as B}from"./app-C6lt1uQR.js";import{_ as R}from"./AdminLayout-CmvtP4AP.js";import"./NavLink-CZ7tcFJn.js";import"./useFlashMessages-DqH0SBLZ.js";const E={class:"max-w-6xl space-y-6"},A={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},D={class:"absolute top-0 right-0 w-24 h-24 transform translate-x-8 -translate-y-8"},O={class:"relative"},U={class:"text-lg font-semibold text-gray-900 dark:text-white capitalize mb-2"},I={class:"text-sm text-gray-600 dark:text-gray-400 mb-4"},T={class:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-slate-700"},z={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},F=["onClick"],H={class:"card overflow-hidden"},N={class:"overflow-x-auto"},L={class:"w-full"},q={class:"bg-gray-50 dark:bg-slate-800"},G={class:"flex flex-col items-center gap-1"},J={class:"bg-white dark:bg-slate-900 divide-y divide-gray-200 dark:divide-slate-700"},Q={class:"bg-gray-50/50 dark:bg-slate-800/50"},W={colspan:"5",class:"px-6 py-3 text-sm font-semibold text-gray-900 dark:text-white"},X={class:"px-6 py-4 text-sm text-gray-900 dark:text-white"},Y={class:"flex items-center gap-2"},Z={class:"flex justify-center"},K=["checked","onChange","disabled"],ee={class:"card p-6"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"text-sm text-gray-600 dark:text-gray-400"},ae={class:"mt-3 space-y-1"},ce={__name:"RolesPermissions",props:{userCounts:Object,currentPermissions:Object},setup(w){var y,b,k,v;const g=w,p=h([{value:"admin",label:"Admin",description:"Full system access with all permissions",icon:"fas fa-user-shield",iconColor:"text-red-600 dark:text-red-400",iconBg:"bg-red-100 dark:bg-red-900/30",color:"bg-red-500",textColor:"text-red-600 dark:text-red-400",userCount:((y=g.userCounts)==null?void 0:y.admin)||0,features:["Complete system control","Manage all users and roles","Access all reports and analytics","Configure system settings"]},{value:"manager",label:"Manager",description:"Branch management and reporting access",icon:"fas fa-user-tie",iconColor:"text-blue-600 dark:text-blue-400",iconBg:"bg-blue-100 dark:bg-blue-900/30",color:"bg-blue-500",textColor:"text-blue-600 dark:text-blue-400",userCount:((b=g.userCounts)==null?void 0:b.manager)||0,features:["Manage branch operations","View sales reports","Manage inventory","Handle refunds and adjustments"]},{value:"cashier",label:"Cashier",description:"POS operations and customer transactions",icon:"fas fa-cash-register",iconColor:"text-emerald-600 dark:text-emerald-400",iconBg:"bg-emerald-100 dark:bg-emerald-900/30",color:"bg-emerald-500",textColor:"text-emerald-600 dark:text-emerald-400",userCount:((k=g.userCounts)==null?void 0:k.cashier)||0,features:["Process sales transactions","Handle customer payments","View product information","Print receipts"]},{value:"stockist",label:"Stockist",description:"Inventory and stock management",icon:"fas fa-boxes",iconColor:"text-purple-600 dark:text-purple-400",iconBg:"bg-purple-100 dark:bg-purple-900/30",color:"bg-purple-500",textColor:"text-purple-600 dark:text-purple-400",userCount:((v=g.userCounts)==null?void 0:v.stockist)||0,features:["Manage product inventory","Stock adjustments","Receive deliveries","Track stock levels"]}]),_=h({products:{name:"Products",icon:"fas fa-box",permissions:[{key:"view",label:"View Products",icon:"fas fa-eye"},{key:"create",label:"Create Products",icon:"fas fa-plus"},{key:"edit",label:"Edit Products",icon:"fas fa-edit"},{key:"delete",label:"Delete Products",icon:"fas fa-trash"}]},sales:{name:"Sales & POS",icon:"fas fa-cash-register",permissions:[{key:"process",label:"Process Sales",icon:"fas fa-shopping-cart"},{key:"refund",label:"Process Refunds",icon:"fas fa-undo"},{key:"view_history",label:"View Sales History",icon:"fas fa-history"},{key:"view_reports",label:"View Sales Reports",icon:"fas fa-chart-line"}]},inventory:{name:"Inventory",icon:"fas fa-warehouse",permissions:[{key:"view",label:"View Inventory",icon:"fas fa-eye"},{key:"adjust",label:"Adjust Stock",icon:"fas fa-sliders-h"},{key:"transfer",label:"Transfer Stock",icon:"fas fa-exchange-alt"},{key:"receive",label:"Receive Stock",icon:"fas fa-dolly"}]},customers:{name:"Customers",icon:"fas fa-users",permissions:[{key:"view",label:"View Customers",icon:"fas fa-eye"},{key:"create",label:"Create Customers",icon:"fas fa-plus"},{key:"edit",label:"Edit Customers",icon:"fas fa-edit"},{key:"delete",label:"Delete Customers",icon:"fas fa-trash"}]},users:{name:"User Management",icon:"fas fa-user-cog",permissions:[{key:"view",label:"View Users",icon:"fas fa-eye"},{key:"create",label:"Create Users",icon:"fas fa-plus"},{key:"edit",label:"Edit Users",icon:"fas fa-edit"},{key:"delete",label:"Delete Users",icon:"fas fa-trash"}]},settings:{name:"Settings",icon:"fas fa-cog",permissions:[{key:"view",label:"View Settings",icon:"fas fa-eye"},{key:"edit_company",label:"Edit Company Info",icon:"fas fa-building"},{key:"edit_payment",label:"Configure Payments",icon:"fas fa-credit-card"},{key:"edit_tax",label:"Configure Tax",icon:"fas fa-percent"}]}}),o=$(g.currentPermissions||{manager:{products:["view","create","edit"],sales:["process","refund","view_history","view_reports"],inventory:["view","adjust","transfer","receive"],customers:["view","create","edit"],users:["view"],settings:["view"]},cashier:{products:["view"],sales:["process","view_history"],inventory:["view"],customers:["view","create"],users:[],settings:[]},stockist:{products:["view","edit"],sales:[],inventory:["view","adjust","transfer","receive"],customers:[],users:[],settings:[]}}),C=(r,t,s)=>{var l,c;return r==="admin"?!0:((c=(l=o[r])==null?void 0:l[t])==null?void 0:c.includes(s))||!1},P=(r,t,s)=>{if(r==="admin")return;o[r]||(o[r]={}),o[r][t]||(o[r][t]=[]);const l=o[r][t].indexOf(s);l>-1?o[r][t].splice(l,1):o[r][t].push(s)},S=()=>{B.post(route("admin.settings.roles.update"),{permissions:o},{preserveScroll:!0,onSuccess:()=>{}})},j=r=>{console.log("Edit role:",r)};return(r,t)=>(a(),M(R,{"page-title":"Roles & Permissions"},{default:V(()=>[e("div",E,[t[7]||(t[7]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Roles & Permissions"),e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Manage user roles and their permissions")])],-1)),e("div",A,[(a(!0),i(d,null,m(p.value,s=>(a(),i("div",{key:s.value,class:"card p-6 hover:shadow-xl transition-shadow duration-300 relative overflow-hidden group"},[e("div",D,[e("div",{class:u(`${s.color} opacity-10 rounded-full w-full h-full`)},null,2)]),e("div",O,[e("div",{class:u(`${s.iconBg} w-12 h-12 rounded-xl flex items-center justify-center mb-4`)},[e("i",{class:u(`${s.icon} ${s.iconColor} text-xl`)},null,2)],2),e("h3",U,n(s.label),1),e("p",I,n(s.description),1),e("div",T,[e("span",z,n(s.userCount)+" "+n(s.userCount===1?"user":"users"),1),e("button",{onClick:l=>j(s),class:"text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 dark:hover:text-emerald-300 text-sm font-medium"},[...t[0]||(t[0]=[f(" Configure ",-1),e("i",{class:"fas fa-arrow-right ml-1"},null,-1)])],8,F)])])]))),128))]),e("div",H,[t[4]||(t[4]=e("div",{class:"p-6 border-b border-gray-200 dark:border-slate-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2"},[e("i",{class:"fas fa-shield-alt text-emerald-500"}),f(" Permissions Matrix ")]),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Manage what each role can do in the system ")],-1)),e("div",N,[e("table",L,[e("thead",q,[e("tr",null,[t[1]||(t[1]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Module / Action ",-1)),(a(!0),i(d,null,m(p.value,s=>(a(),i("th",{key:s.value,class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},[e("div",G,[e("i",{class:u(`${s.icon} ${s.iconColor}`)},null,2),e("span",null,n(s.label),1)])]))),128))])]),e("tbody",J,[(a(!0),i(d,null,m(_.value,(s,l)=>(a(),i(d,{key:l},[e("tr",Q,[e("td",W,[e("i",{class:u(`${s.icon} mr-2 text-gray-500 dark:text-gray-400`)},null,2),f(" "+n(s.name),1)])]),(a(!0),i(d,null,m(s.permissions,c=>(a(),i("tr",{key:c.key},[e("td",X,[e("div",Y,[e("i",{class:u(`${c.icon} text-gray-400 w-4`)},null,2),f(" "+n(c.label),1)])]),(a(!0),i(d,null,m(p.value,x=>(a(),i("td",{key:x.value,class:"px-6 py-4 text-center"},[e("div",Z,[e("input",{type:"checkbox",checked:C(x.value,l,c.key),onChange:re=>P(x.value,l,c.key),disabled:x.value==="admin",class:"w-5 h-5 text-emerald-600 rounded border-gray-300 focus:ring-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,K)])]))),128))]))),128))],64))),128))])])]),e("div",{class:"p-6 border-t border-gray-200 dark:border-slate-700 bg-gray-50 dark:bg-slate-800/50"},[e("div",{class:"flex items-center justify-between"},[t[3]||(t[3]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[e("i",{class:"fas fa-info-circle mr-1"}),f(" Admin role has all permissions by default and cannot be modified ")],-1)),e("button",{onClick:S,class:"btn-primary"},[...t[2]||(t[2]=[e("i",{class:"fas fa-save mr-2"},null,-1),f(" Save Changes ",-1)])])])])]),e("div",ee,[t[6]||(t[6]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-info-circle text-blue-500"}),f(" Role Descriptions ")],-1)),e("div",se,[(a(!0),i(d,null,m(p.value,s=>(a(),i("div",{key:s.value,class:"p-4 bg-gray-50 dark:bg-slate-800 rounded-lg"},[e("h3",{class:u(`text-base font-semibold capitalize mb-2 ${s.textColor}`)},[e("i",{class:u(`${s.icon} mr-2`)},null,2),f(" "+n(s.label),1)],2),e("p",te,n(s.description),1),e("ul",ae,[(a(!0),i(d,null,m(s.features,l=>(a(),i("li",{key:l,class:"text-sm text-gray-700 dark:text-gray-300 flex items-start gap-2"},[t[5]||(t[5]=e("i",{class:"fas fa-check text-emerald-500 mt-0.5"},null,-1)),e("span",null,n(l),1)]))),128))])]))),128))])])])]),_:1}))}};export{ce as default};
