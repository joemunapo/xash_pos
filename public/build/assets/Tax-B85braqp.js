import{s as _,r as U,m as $,c as N,w as F,a as e,d as o,h as i,n as c,t as d,o as l,g as p,F as S,e as j,p as V,b as x,u as r,v as f,q as B,j as h}from"./app-hHih9BgC.js";import{_ as q}from"./AdminLayout-B4rk0_5R.js";import{S as O}from"./useFlashMessages-Br0efLxG.js";import"./NavLink-faodrpPr.js";const z={class:"space-y-6"},L={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Y={class:"space-y-6"},G={class:"card p-6"},I={class:"flex items-center justify-between"},H={class:"flex items-center gap-4"},J={class:"text-sm text-gray-500 dark:text-gray-400"},K={key:0,class:"card p-6"},P={class:"space-y-3"},Q={class:"flex items-center gap-3"},W={class:"font-medium text-gray-900 dark:text-white"},X=["onClick"],Z={class:"space-y-6"},ee={class:"flex items-center justify-between mb-4"},te=["disabled"],se={class:"space-y-3"},ae={key:0,class:"text-center py-8"},re=["disabled"],ne={class:"flex items-center gap-4 min-w-0"},le={class:"w-16 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center shrink-0"},oe={class:"text-sm font-bold text-blue-600 dark:text-blue-400"},de={class:"flex items-center gap-2"},ie={class:"font-medium text-gray-900 dark:text-white"},ue={key:0,class:"px-2 py-0.5 text-xs font-medium bg-brand-100 text-brand-700 dark:bg-brand-900/30 dark:text-brand-400 rounded-full"},ce={key:1,class:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400 rounded-full"},xe={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ge={key:1,class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},be={class:"flex items-center gap-2"},pe=["onClick"],fe=["onClick"],me={class:"bg-white dark:bg-slate-900 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto"},ye={class:"p-6 border-b border-gray-200 dark:border-slate-700"},ve={class:"text-xl font-bold text-gray-900 dark:text-white"},ke={key:0,class:"text-red-500 text-sm mt-1"},_e={key:0,class:"text-red-500 text-sm mt-1"},he={class:"grid grid-cols-2 gap-4"},we={key:0,class:"text-red-500 text-sm mt-1"},Te={key:0,class:"text-red-500 text-sm mt-1"},Ce={class:"space-y-3 pt-2"},Se={class:"flex items-center gap-3 cursor-pointer"},je={class:"flex items-center gap-3 cursor-pointer"},Ve={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-slate-700"},Be=["disabled"],Re={__name:"Tax",props:{taxes:Array,branches:Array,taxEnabled:Boolean,branchTaxSettings:Object,filters:Object},setup(g){const w=g,m=_(!1),b=_(!1),y=_(null),u=_(w.taxEnabled),v=U({...w.branchTaxSettings}),a=$({name:"",rate:"",start_date:"",end_date:"",is_default:!1,is_active:!0,description:""}),D=()=>{const n=!u.value;h.post(route("admin.settings.tax.toggle"),{enabled:n},{preserveScroll:!0,onSuccess:()=>{u.value=n}})},E=n=>{const t=!v[n.id];h.post(route("admin.settings.tax.branch.toggle",n.id),{enabled:t},{preserveScroll:!0,onSuccess:()=>{v[n.id]=t}})},A=n=>{y.value=n,a.name=n.name,a.rate=n.rate,a.start_date=n.start_date||"",a.end_date=n.end_date||"",a.is_default=n.is_default,a.is_active=n.is_active,a.description=n.description||"",b.value=!0},k=()=>{m.value=!1,b.value=!1,y.value=null,a.reset(),a.clearErrors()},M=()=>{b.value&&y.value?a.put(route("admin.settings.tax.update",y.value.id),{onSuccess:()=>k()}):a.post(route("admin.settings.tax.store"),{onSuccess:()=>k()})},R=n=>{O.fire({title:"Delete Tax Rate?",text:`Are you sure you want to delete "${n.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#10b981",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it"}).then(t=>{t.isConfirmed&&h.delete(route("admin.settings.tax.destroy",n.id))})},T=n=>new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"});return(n,t)=>(l(),N(q,{"page-title":"Tax Management"},{default:F(()=>[e("div",z,[t[20]||(t[20]=e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Tax Settings"),e("p",{class:"text-gray-600 dark:text-gray-400 mt-1"},"Configure tax collection for your business")])],-1)),e("div",L,[e("div",Y,[e("div",G,[e("div",I,[e("div",H,[e("div",{class:c(["w-14 h-14 rounded-lg flex items-center justify-center",u.value?"bg-brand-100 dark:bg-brand-900/30":"bg-gray-100 dark:bg-slate-800"])},[e("i",{class:c(["fas fa-percentage text-2xl",u.value?"text-brand-600 dark:text-brand-400":"text-gray-400"])},null,2)],2),e("div",null,[t[9]||(t[9]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Tax Collection",-1)),e("p",J,d(u.value?"Tax is being applied to sales":"Tax is currently disabled"),1)])]),e("button",{onClick:D,class:c(["relative inline-flex h-8 w-14 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2",u.value?"bg-brand-600":"bg-gray-200 dark:bg-slate-700"])},[e("span",{class:c(["pointer-events-none inline-block h-7 w-7 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",u.value?"translate-x-6":"translate-x-0"])},null,2)],2)])]),u.value&&g.branches.length>0?(l(),o("div",K,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},[e("i",{class:"fas fa-store mr-2 text-brand-500"}),p("Branch Tax Settings ")],-1)),t[12]||(t[12]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},"Enable or disable tax collection per branch",-1)),e("div",P,[(l(!0),o(S,null,j(g.branches,s=>(l(),o("div",{key:s.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-slate-800 rounded-lg"},[e("div",Q,[t[10]||(t[10]=e("div",{class:"w-10 h-10 bg-brand-100 dark:bg-brand-900/30 rounded-lg flex items-center justify-center"},[e("i",{class:"fas fa-store text-brand-600 dark:text-brand-400"})],-1)),e("span",W,d(s.name),1)]),e("button",{onClick:C=>E(s),class:c(["relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-brand-500 focus:ring-offset-2",v[s.id]?"bg-brand-600":"bg-gray-200 dark:bg-slate-700"])},[e("span",{class:c(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",v[s.id]?"translate-x-5":"translate-x-0"])},null,2)],10,X)]))),128))])])):i("",!0)]),e("div",Z,[e("div",{class:c(["card p-6",{"opacity-50 pointer-events-none":!u.value}])},[e("div",ee,[t[14]||(t[14]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},[e("i",{class:"fas fa-list mr-2 text-brand-500"}),p("Tax Rates ")],-1)),e("button",{onClick:t[0]||(t[0]=s=>m.value=!0),class:"btn-primary text-sm",disabled:!u.value},[...t[13]||(t[13]=[e("i",{class:"fas fa-plus mr-2"},null,-1),p("Add Rate ",-1)])],8,te)]),e("div",se,[g.taxes.length===0?(l(),o("div",ae,[t[16]||(t[16]=e("i",{class:"fas fa-percentage text-4xl text-gray-300 dark:text-gray-600 mb-3"},null,-1)),t[17]||(t[17]=e("p",{class:"text-gray-500 dark:text-gray-400"},"No tax rates configured",-1)),e("button",{onClick:t[1]||(t[1]=s=>m.value=!0),class:"btn-primary mt-3 text-sm",disabled:!u.value},[...t[15]||(t[15]=[e("i",{class:"fas fa-plus mr-2"},null,-1),p("Add Your First Tax Rate ",-1)])],8,re)])):i("",!0),(l(!0),o(S,null,j(g.taxes,s=>(l(),o("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-slate-800 rounded-lg"},[e("div",ne,[e("div",le,[e("span",oe,d(s.rate)+"%",1)]),e("div",null,[e("div",de,[e("p",ie,d(s.name),1),s.is_default?(l(),o("span",ue," Default ")):i("",!0),s.is_active?i("",!0):(l(),o("span",ce," Inactive "))]),s.description?(l(),o("p",xe,d(s.description),1)):i("",!0),s.start_date||s.end_date?(l(),o("p",ge,d(s.start_date?T(s.start_date):"Start")+" - "+d(s.end_date?T(s.end_date):"No end"),1)):i("",!0)])]),e("div",be,[e("button",{onClick:C=>A(s),class:"p-2 text-gray-600 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400"},[...t[18]||(t[18]=[e("i",{class:"fas fa-edit"},null,-1)])],8,pe),s.is_default?i("",!0):(l(),o("button",{key:0,onClick:C=>R(s),class:"p-2 text-gray-600 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400"},[...t[19]||(t[19]=[e("i",{class:"fas fa-trash"},null,-1)])],8,fe))])]))),128))])],2)])])]),m.value||b.value?(l(),o("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:V(k,["self"])},[e("div",me,[e("div",ye,[e("h2",ve,d(b.value?"Edit Tax Rate":"Add Tax Rate"),1)]),e("form",{onSubmit:V(M,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[t[21]||(t[21]=e("label",{class:"label"},"Tax Name *",-1)),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>r(a).name=s),type:"text",class:"input-field",placeholder:"e.g., VAT, Sales Tax",required:""},null,512),[[f,r(a).name]]),r(a).errors.name?(l(),o("p",ke,d(r(a).errors.name),1)):i("",!0)]),e("div",null,[t[22]||(t[22]=e("label",{class:"label"},"Tax Rate (%) *",-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>r(a).rate=s),type:"number",step:"0.01",min:"0",max:"100",class:"input-field",placeholder:"e.g., 15",required:""},null,512),[[f,r(a).rate]]),r(a).errors.rate?(l(),o("p",_e,d(r(a).errors.rate),1)):i("",!0)]),e("div",he,[e("div",null,[t[23]||(t[23]=e("label",{class:"label"},"Start Date",-1)),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r(a).start_date=s),type:"date",class:"input-field"},null,512),[[f,r(a).start_date]]),r(a).errors.start_date?(l(),o("p",we,d(r(a).errors.start_date),1)):i("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{class:"label"},"End Date",-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>r(a).end_date=s),type:"date",class:"input-field"},null,512),[[f,r(a).end_date]]),r(a).errors.end_date?(l(),o("p",Te,d(r(a).errors.end_date),1)):i("",!0)])]),e("div",null,[t[25]||(t[25]=e("label",{class:"label"},"Description",-1)),x(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=s=>r(a).description=s),class:"input-field",rows:"2",placeholder:"Optional description"},null,512),[[f,r(a).description]])]),e("div",Ce,[e("label",Se,[x(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>r(a).is_default=s),type:"checkbox",class:"w-5 h-5 text-brand-600 border-gray-300 rounded focus:ring-brand-500"},null,512),[[B,r(a).is_default]]),t[26]||(t[26]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Set as default tax rate",-1))]),e("label",je,[x(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>r(a).is_active=s),type:"checkbox",class:"w-5 h-5 text-brand-600 border-gray-300 rounded focus:ring-brand-500"},null,512),[[B,r(a).is_active]]),t[27]||(t[27]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Active",-1))])]),e("div",Ve,[e("button",{type:"button",onClick:k,class:"btn-secondary"},"Cancel"),e("button",{type:"submit",class:"btn-primary",disabled:r(a).processing},[e("i",{class:c([r(a).processing?"fas fa-spinner fa-spin":"fas fa-save","mr-2"])},null,2),p(" "+d(r(a).processing?"Saving...":"Save"),1)],8,Be)])],32)])])):i("",!0)]),_:1}))}};export{Re as default};
